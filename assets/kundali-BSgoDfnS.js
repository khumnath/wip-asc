import{r as m,j as e,a6 as bt,a7 as pt,a8 as yt,a9 as ft,aa as jt,J as kt,X as Nt,ab as vt,P as Ye}from"./vendor-react-BO-BQcH4.js";import{t as E,g as wt,a as St,N as a,b as p,c as ne,G as Dt,f as Ct,d as Mt,e as B,h as I,i as K,R as Ue,j as we,k as We,l as Pt,m as Se,r as Lt,n as At,o as ge}from"./bikram-D5ePk0Hj.js";import{n as ue,T as xe,L as It,a as Xe,X as Me,S as $t,b as Tt,C as be,P as Je}from"./data-DcBXQ_4R.js";import{t as Bt}from"./vendor-utils-y-iLWhYP.js";const Et=ue.find(t=>t.romanization.toLowerCase()==="kathmandu"),me=Et??ue[0],Ft=({label:t,children:n,...i})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...i,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-orange-400 dark:focus:border-orange-400",children:n}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(be,{className:"w-4 h-4"})})]}),zt=()=>{const t=yt();return m.useEffect(()=>{const n=setTimeout(()=>{try{t.invalidateSize()}catch{}},150);return()=>clearTimeout(n)},[t]),null},Rt=({onClose:t,onLocationSelect:n,initialPosition:i})=>{const[d,x]=m.useState(i),c=()=>(ft({click(r){x([r.latlng.lat,r.latlng.lng])}}),e.jsx(jt,{position:d})),o=()=>{n(d[0],d[1]),t()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-slate-50 dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a.selectOnMap}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Me,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(bt,{center:i,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(pt,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(zt,{}),e.jsx(c,{})]},`${i[0]}-${i[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",d[0].toFixed(4),", Lon: ",d[1].toFixed(4)]}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 dark:bg-orange-500 dark:text-gray-100 dark:hover:bg-orange-600",children:a.selectLocation})]})]})})},He=({children:t})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-orange-500 focus-within:ring-1 focus-within:ring-orange-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-orange-400 dark:focus-within:ring-orange-400",children:t}),se=({label:t,children:n,...i})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("select",{...i,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:n}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(be,{className:"w-4 h-4"})})]}),_t=({label:t,type:n="number",...i})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("input",{...i,type:n,className:"relative w-full bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600"})]}),Ot=1900,Kt=2150,Yt=1960,Ht=2210,Ze=m.forwardRef(({onCalculate:t,isLoading:n,hideSubmitButton:i=!1,defaultValues:d,submitLabel:x,onNavigate:c},o)=>{const r=new Date,b=E(r),[g,w]=m.useState(d?.name||"प्रयोगकर्ता"),[l,h]=m.useState(d?.dateSystem||"BS"),[f,j]=m.useState(!1),[S,N]=m.useState("search"),[D,L]=m.useState(r.getFullYear()),[A,k]=m.useState(r.getMonth()+1),[v,u]=m.useState(r.getDate()),[C,M]=m.useState(d?.bsYear||b.year),[F,le]=m.useState(d?.bsMonth||b.monthIndex+1),[P,z]=m.useState(d?.bsDay||b.day),R=m.useRef(null),[oe,q]=m.useState(!1),[V,ee]=m.useState(null);let $=r.getHours(),Y="AM";$===0?($=12,Y="AM"):$===12?Y="PM":$>12?($=$-12,Y="PM"):Y="AM";const[G,T]=m.useState(d?.period||Y),[de,et]=m.useState(d?.hour||$),[Pe,tt]=m.useState(d?.minute||r.getMinutes()),[Le,at]=m.useState(d?.second||r.getSeconds()),ie=d?.location||me,[H,Ae]=m.useState(ie),[U,pe]=m.useState(ie.latitude),[W,ye]=m.useState(ie.longitude),[fe,te]=m.useState(ie.zoneId),[st,Ie]=m.useState(!1),[ce,rt]=m.useState(""),nt=m.useMemo(()=>{const s=ce.trim().toLowerCase();return s?ue.filter(y=>y.romanization.toLowerCase().includes(s)||y.name.includes(ce.trim())):ue},[ce]);m.useEffect(()=>{if(!(typeof U!="number"||typeof W!="number"||isNaN(U)||isNaN(W)))try{const s=Bt(U,W),y=xe.some(Z=>Z.zoneId===s);te(y?s:me?.zoneId??"Asia/Kathmandu")}catch{te(me?.zoneId??"Asia/Kathmandu")}},[U,W,me?.zoneId]);const lt=m.useMemo(()=>Array.from({length:12},(s,y)=>y+1),[]),$e=m.useMemo(()=>Array.from({length:60},(s,y)=>y),[]),X=m.useMemo(()=>{const y=(l==="BS"?C:D)||(l==="BS"?b.year:r.getFullYear());return l==="BS"?wt(y,F-1).totalDays:St(y,A)},[l,C,F,D,A,b.year,r]);m.useEffect(()=>{l==="BS"&&P>X&&z(X),l==="AD"&&v>X&&u(X)},[X,l,P,v]);const ot=s=>{const y=s.target.value,_=Ct(y).replace(/[^0-9]/g,"");if(_===""){l==="BS"?M(null):L(null);return}const J=parseInt(_,10);isNaN(J)||(l==="BS"?M(J):L(J))},dt=()=>{const s=l==="BS"?C:D;R.current=s,l==="BS"?M(null):L(null)},it=()=>{const s=l==="BS"?C:D;(s===null||String(s).trim()==="")&&(l==="BS"?M(R.current):L(R.current))},je=()=>{const s=new Date,y=E(s);L(s.getFullYear()),k(s.getMonth()+1),u(s.getDate()),M(y.year),le(y.monthIndex+1),z(y.day)},ct=s=>{Ae(s),pe(s.latitude),ye(s.longitude),te(s.zoneId),j(!1)},xt=(s,y)=>{pe(s),ye(y),Ae({name:`${s.toFixed(4)}, ${y.toFixed(4)}`,romanization:"Manual Selection",latitude:s,longitude:y,zoneId:fe,offset:xe.find(Z=>Z.zoneId===fe)?.offset??5.75}),j(!1)},Te=()=>{let s=C,y=D;if(s===null&&y===null&&(je(),s=b.year,y=r.getFullYear()),(l==="BS"?s:D)===null)return null;const _=ae=>ae.toString().padStart(2,"0");let J=y??r.getFullYear(),Fe=A,ze=v;if(l==="BS"){const ae=s??b.year,ve=Mt(ae,F-1,P);J=ve.getFullYear(),Fe=ve.getMonth()+1,ze=ve.getDate()}let ke=de;G==="PM"&&de<12&&(ke+=12),G==="AM"&&de===12&&(ke=0);const ut=`${J}-${_(Fe)}-${_(ze)}T${_(ke)}:${_(Pe)}:${_(Le)}`,Re=H.latitude,_e=H.longitude,Ne=H.zoneId,Oe=xe.find(ae=>ae.zoneId===Ne),Ke=Oe?Oe.offset:5.75;return{name:g,datetime:ut,latitude:Re,longitude:_e,zoneId:Ne,offset:Ke,location:{name:H.name,romanization:H.romanization,latitude:Re,longitude:_e,zoneId:Ne,offset:Ke},options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}}},mt=()=>{const s=l==="BS"?C:D;if(s===null||String(s).length<4)return!1;const[y,Z]=l==="BS"?[Yt,Ht]:[Ot,Kt];return!(s<y||s>Z)},Be=()=>new Promise(s=>{mt()?s(Te()):(je(),q(!0),ee(()=>s))});m.useImperativeHandle(o,()=>({validateAndGetData:Be}));const ht=()=>{q(!1);const s=Te();V&&(V(s),ee(null))},gt=()=>{q(!1),V&&(V(null),ee(null))},Ee=async s=>{s&&s.preventDefault();const y=await Be();y&&t(y)};return m.useEffect(()=>{if(d?.autoSubmit){const s=setTimeout(()=>Ee(),500);return()=>clearTimeout(s)}},[d]),e.jsxs(e.Fragment,{children:[c&&e.jsx("div",{onClick:()=>c("mero-dasha"),className:"mb-6 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 flex items-center justify-between cursor-pointer hover:shadow-md transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-800 rounded-full text-orange-600 dark:text-orange-200",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-100 text-sm",children:"हालको दशा र भविष्यवाणी हेर्न चाहनुहुन्छ?"}),e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium mt-0.5 group-hover:underline",children:"मेरो दशामा जानुहोस् →"})]})]})}),e.jsxs("form",{onSubmit:Ee,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"name",value:g,onChange:s=>w(s.target.value),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"}),e.jsx("label",{htmlFor:"name",className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:a.name})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>{h("BS")},className:`px-4 py-1 text-sm rounded ${l==="BS"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.bs}),e.jsx("button",{type:"button",onClick:()=>{h("AD")},className:`px-4 py-1 text-sm rounded ${l==="AD"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.ad})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(He,{children:[e.jsx(_t,{label:a.year,value:l==="BS"?p(C??""):D??"",onChange:ot,onFocus:dt,onBlur:it,type:"tel",inputMode:"numeric",autoComplete:"off"}),e.jsx(se,{label:a.month,value:l==="BS"?F:A,onChange:s=>l==="BS"?le(Number(s.target.value)):k(Number(s.target.value)),children:Array.from({length:12},(s,y)=>e.jsx("option",{value:y+1,children:l==="BS"?ne[y]:Dt[y]},y+1))}),e.jsx(se,{label:a.day,value:l==="BS"?P:v,onChange:s=>l==="BS"?z(Number(s.target.value)):u(Number(s.target.value)),children:Array.from({length:X},(s,y)=>e.jsx("option",{value:y+1,children:p(y+1)},y+1))})]})}),e.jsx("button",{type:"button",onClick:je,className:"px-3 py-2 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500","aria-label":a.resetToToday,children:a.resetToToday})]})}),e.jsxs(He,{children:[e.jsx(se,{label:a.hour,value:de,onChange:s=>et(Number(s.target.value)),children:lt.map(s=>e.jsx("option",{value:s,children:p(s)},s))}),e.jsx(se,{label:a.minute,value:Pe,onChange:s=>tt(Number(s.target.value)),children:$e.map(s=>e.jsx("option",{value:s,children:p(s)},s))}),e.jsx(se,{label:a.second,value:Le,onChange:s=>at(Number(s.target.value)),children:$e.map(s=>e.jsx("option",{value:s,children:p(s)},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>T("AM"),className:`px-4 py-1 text-sm rounded ${G==="AM"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.am}),e.jsx("button",{type:"button",onClick:()=>T("PM"),className:`px-4 py-1 text-sm rounded ${G==="PM"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.pm})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400 z-10",children:a.location}),e.jsxs("button",{type:"button",onClick:()=>{j(!0),N("search")},className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 flex justify-between items-center text-left",children:[e.jsxs("span",{children:[H.name," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",H.romanization,")"]})]}),e.jsx(It,{className:"w-4 h-4 text-gray-500"})]})]}),!i&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-orange-600 dark:hover:bg-orange-700 dark:disabled:bg-gray-500",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):x||a.calculate})})]}),f&&e.jsx("div",{className:"fixed inset-0 flex items-start justify-center bg-black/60 z-50 p-4 pt-8 sm:pt-8 transition-opacity",onClick:()=>j(!1),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 w-full h-3/6 sm:h-3/5 sm:max-h-[90vh] sm:rounded-lg shadow-xl max-w-lg p-4 flex flex-col transition-transform",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:S==="search"?a.searchOrSelectLocation:a.enterManually}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Me,{className:"w-5 h-5"})})]}),S==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx($t,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a.locationSearchPlaceholder,value:ce,onChange:s=>rt(s.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:nt.map(s=>e.jsxs("div",{onClick:()=>ct(s),className:"p-2.5 cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-900/50 rounded-md text-sm flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.romanization})]},s.name))}),e.jsx("div",{className:"pt-3 mt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("button",{onClick:()=>N("manual"),className:"text-sm text-orange-600 dark:text-orange-400 hover:underline",children:[a.cantFindLocation," ",a.enterManuallyOrMap]})})]}):e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"latitude",value:U,onChange:s=>pe(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"}),e.jsx("label",{htmlFor:"latitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.latitudeShort})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"longitude",value:W,onChange:s=>ye(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"}),e.jsx("label",{htmlFor:"longitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.longitudeShort})]})]}),e.jsx(Ft,{label:a.timezone,value:fe,onChange:s=>te(s.target.value),children:xe.map(s=>e.jsx("option",{value:s.zoneId,children:s.label},s.zoneId))}),e.jsxs("button",{type:"button",onClick:()=>Ie(!0),className:"w-full flex justify-center items-center gap-2 py-2 bg-gray-200 hover:bg-gray-300 rounded-md dark:bg-gray-600 dark:hover:bg-gray-500","aria-label":a.selectOnMap,children:[e.jsx(Tt,{className:"w-5 h-5"})," ",a.selectOnMap]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>N("search"),className:"text-sm text-orange-600 dark:text-orange-400 hover:underline",children:["← ",a.backToSearch]})})]})]})}),st&&e.jsx(Rt,{onClose:()=>Ie(!1),onLocationSelect:xt,initialPosition:[U,W]}),oe&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50 p-4 transition-opacity",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-700 dark:text-amber-400",children:a.invalidDateTitle}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:a.invalidDateMessage(l)}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{onClick:gt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-300 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:a.edit}),e.jsx("button",{onClick:ht,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",children:a.proceed})]})]})})]})}),Zt=({cx:t,cy:n,onSelect:i})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(d,x)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-x*30-90}, ${t}, ${n})`,onClick:()=>i(x+1)},x))]});function qe(t){const n=Math.floor(t),i=Math.floor((t-n)*60);return`${p(n)}°${p(i)}′`}function Ve(t){const n=Math.round(t/30*100);return`${p(n)}%`}const qt=[{path:"M 50,0 L 75,25 L 50,50 L 25,25 Z",centroid:{x:50,y:24},rashiPos:{x:50,y:42}},{path:"M 50,0 L 25,25 L 0,0 Z",centroid:{x:28,y:10},rashiPos:{x:12,y:8}},{path:"M 0,0 L 25,25 L 0,50 Z",centroid:{x:10,y:28},rashiPos:{x:8,y:12}},{path:"M 0,50 L 25,25 L 50,50 L 25,75 Z",centroid:{x:24,y:50},rashiPos:{x:42,y:50}},{path:"M 0,50 L 25,75 L 0,100 Z",centroid:{x:10,y:72},rashiPos:{x:8,y:88}},{path:"M 0,100 L 25,75 L 50,100 Z",centroid:{x:28,y:90},rashiPos:{x:12,y:92}},{path:"M 50,100 L 25,75 L 50,50 L 75,75 Z",centroid:{x:50,y:76},rashiPos:{x:50,y:58}},{path:"M 50,100 L 75,75 L 100,100 Z",centroid:{x:72,y:90},rashiPos:{x:88,y:92}},{path:"M 100,100 L 75,75 L 100,50 Z",centroid:{x:90,y:72},rashiPos:{x:92,y:88}},{path:"M 100,50 L 75,25 L 50,50 L 75,75 Z",centroid:{x:76,y:50},rashiPos:{x:58,y:50}},{path:"M 100,50 L 75,25 L 100,0 Z",centroid:{x:90,y:28},rashiPos:{x:92,y:12}},{path:"M 50,0 L 75,25 L 100,0 Z",centroid:{x:72,y:10},rashiPos:{x:88,y:8}}],Vt=({planets:t,ascendantSign:n,ascendantDegrees:i,chartType:d="lagna"})=>{const[x,c]=m.useState(null),r=t.find(l=>l.planet==="MOON")?.rashi??1,b=d==="chandra"?r:n,g=m.useMemo(()=>{const l=new Map;return t.forEach(h=>{const j=(h.rashi-b+12)%12+1;l.has(j)||l.set(j,[]),l.get(j).push(h)}),l},[t,b]),w=l=>(b+l-2)%12+1;return e.jsxs("div",{className:"sq-chart-wrapper font-devanagari relative select-none",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full bg-[rgba(255,250,240,0.6)] dark:bg-[rgba(31,41,55,0.6)] border-[1.5px] border-[#d2b48c] dark:border-[#4b5563] rounded-2xl overflow-hidden",children:[qt.map((l,h)=>{const f=h+1,j=w(f),S=g.get(f)||[];return e.jsxs("g",{className:"cursor-pointer group",onClick:()=>c(f),children:[e.jsx("path",{d:l.path,className:"fill-transparent hover:fill-orange-500/10 dark:hover:fill-orange-400/10 transition-colors duration-200"}),e.jsx("text",{x:l.rashiPos.x,y:l.rashiPos.y,className:"fill-[#f43f28] dark:fill-[#f87171] font-bold text-[4px] pointer-events-none",textAnchor:"middle",dominantBaseline:"middle",children:p(j)}),e.jsx("foreignObject",{x:l.centroid.x-12,y:l.centroid.y-10,width:"24",height:"20",className:"pointer-events-none",children:e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-[0.5px] w-full h-full text-[2.8px] leading-tight text-[#423729] dark:text-[#d1d5db]",children:[f===1&&d!=="chandra"&&e.jsx("span",{className:"text-[#b91c1c] dark:text-[#fe2a2a] font-bold",children:B.ASCENDANT}),f===1&&d==="chandra"&&e.jsxs("span",{className:"text-[#b91c1c] dark:text-[#fe2a2a] font-bold",children:[B.ASCENDANT,"(चं)"]}),S.map(N=>d==="chandra"&&f===1&&N.planet==="MOON"?null:e.jsx("span",{className:N.retrograde?"text-[#2563eb] dark:text-[#60a5fa] font-bold":"",children:B[N.planet]},N.planet))]})})]},f)}),e.jsxs("g",{className:"stroke-[#d2b48c] dark:stroke-[#4b5563] pointer-events-none",strokeWidth:"0.5",fill:"none",children:[e.jsx("path",{d:"M 0,0 L 100,100 M 100,0 L 0,100"}),e.jsx("path",{d:"M 50,0 L 0,50 L 50,100 L 100,50 Z"})]})]}),x&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 px-4",onClick:()=>c(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:l=>l.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",p(x)," – ",I[w(x)-1]," (स्वामी:"," ",K[Ue[w(x)]],")"]}),x===1&&d!=="chandra"&&i!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[B.ASCENDANT," (",I[n-1],")"]}),e.jsxs("span",{children:[qe(i)," (",Ve(i),")"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded mt-1",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(i/30*100)}%`}})})]}),(g.get(x)||[]).map(l=>{const h=l.degreesInSign!==void 0?Math.round(l.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:l.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:K[l.planet]}),l.degreesInSign!==void 0&&e.jsxs("span",{children:[qe(l.degreesInSign)," (",Ve(l.degreesInSign),")"]})]}),h!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded mt-1",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${h}%`}})})]},l.planet)})]})})]})},Gt={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function he(t){const n=Math.floor(t),i=Math.floor((t-n)*60);return`${p(n)}°${p(i)}′`}function Ge(t){const n=Math.round(t/30*100);return`${p(n)}%`}const Ut=({planets:t,ascendantSign:n,ascendantDegrees:i,ascendantNakshatra:d,ascendantNakshatraPada:x,chartType:c="lagna",layout:o="lotus"})=>{const[r,b]=m.useState(null),g=t.find(h=>h.planet==="MOON"),w=g?.rashi??1,l=m.useMemo(()=>{const h=new Map;return t.forEach(f=>{const j=f.rashi,S=c==="chandra"?(j-w+12)%12+1:j;h.has(S)||h.set(S,[]),h.get(S).push(f)}),h},[t,c,w]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[o==="square"?e.jsx(Vt,{planets:t,ascendantSign:n,ascendantDegrees:i,ascendantNakshatra:d,ascendantNakshatraPada:x,chartType:c}):e.jsxs("div",{className:"birth-chart",children:[Array.from({length:12},(h,f)=>f+1).map(h=>{const f=l.get(h)||[],j=Gt[h];if(j===void 0)return null;const S=[];return c!=="chandra"&&h===n&&S.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:B.ASCENDANT}),i!==void 0&&e.jsx("span",{className:"planet-deg",children:he(i)})]},"asc")),c==="chandra"&&h===1&&S.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[B.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),f.forEach(N=>{S.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:N.retrograde?"retrograde":"",children:B[N.planet]}),N.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:he(N.degreesInSign)})]},N.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${j}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:p(h)}),e.jsx("div",{className:"planets-container",children:S})]},h)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-red-400",children:"ॐ"}),e.jsx(Zt,{cx:200,cy:200,onSelect:h=>b(h)})]}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>b(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:h=>h.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",p(r)," – ",I[r-1]," (स्वामी:"," ",K[Ue[r]],")"]}),c!=="chandra"&&r===n&&i!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[B.ASCENDANT," (",I[n-1],")"]}),e.jsxs("span",{children:[he(i)," (",Ge(i),")"]})]}),d&&x&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[we[d],p(x)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(i/30*100)}%`}})})]}),c==="chandra"&&r===1&&g&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:e.jsxs("span",{children:[B.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((g.degreesInSign||0)/30*100)}%`}})}),g.nakshatra&&g.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",we[g.nakshatra],p(g.nakshatraPada)]})]}),(l.get(r)||[]).map(h=>{if(c==="chandra"&&r===1&&h.planet==="MOON")return null;const f=h.degreesInSign!==void 0?Math.round(h.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:h.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:K[h.planet]}),h.degreesInSign!==void 0&&e.jsxs("span",{children:[he(h.degreesInSign)," (",Ge(h.degreesInSign),")"]})]}),h.nakshatra&&h.nakshatraPada&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[we[h.nakshatra],p(h.nakshatraPada)]}),f!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${f}%`}})})]},h.planet)})]})})]})},Wt=({planets:t})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300 print:bg-white print:shadow-none print:border-none print:break-inside-avoid",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:a.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.planet}),e.jsx("th",{className:"py-2 px-2",children:a.rashi}),e.jsx("th",{className:"py-2 px-2",children:a.degrees}),e.jsx("th",{className:"py-2 px-2",children:a.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:a.pada})]})}),e.jsx("tbody",{children:t.map(n=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[K[n.planet],n.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",a.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:I[n.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:We(n.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:n.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:p(n.nakshatraPada)})]},n.planet))})]})]}),Ce=({data:t,title:n,titleClassName:i})=>{const d=k=>{if(!k)return"?";try{const v=new Date(k),u=v.getUTCHours(),C=v.getUTCMinutes(),M=At(u),F=u%12===0?12:u%12;return`${p(F)}:${p(C.toString().padStart(2,"0"))} ${M}`}catch{return"?"}};function x(k){let v,u;if(k>=1&&k<=15)v=k,u="शुक्ल पक्ष";else if(k>=16&&k<=30)v=k-15,u="कृष्ण पक्ष";else return`अवैध तिथि (${k})`;return Lt(v,u)}const c=(k,v,u)=>{if(!k||!v||!u)return"?";try{const C=G=>{const T=new Date(G);return new Date(T.getUTCFullYear(),T.getUTCMonth(),T.getUTCDate(),T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds())},M=C(u),F=C(k),le=C(v),P=E(M),z=E(F),R=E(le),oe=d(k),q=d(v),V=z.year===P.year&&z.monthIndex===P.monthIndex&&z.day===P.day,ee=R.year===P.year&&R.monthIndex===P.monthIndex&&R.day===P.day,$=V?oe:`${p(z.day)} गते ${oe}`,Y=ee?q:`${p(R.day)} गते ${q}`;return`${$} देखि ${Y} सम्म`}catch{return"N/A"}},o=t.planets.find(k=>k.planet==="MOON"),r=t.planets.find(k=>k.planet==="SUN"),b=new Date(t.birthDetails.datetime),g=E(b),w=`${p(g.year)} ${ne[g.monthIndex]} ${p(g.day)}`,l=Pt[b.getDay()],h=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(b),f=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(b),j=Se[t.nakshatra.index],S=j?j.syllables[t.nakshatra.pada-1]:"?";function N(k,v){const u=Se.findIndex(M=>M.name===k);return u===-1?"?":Se[u].syllables[v-1]||"?"}const D=o?N(o.nakshatra,o.nakshatraPada):"?",L=I[t.ascendant.sign-1],A=We(t.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg bg-slate-200 print:bg-white dark:bg-gray-800 print:shadow-none print:border-none print:h-auto print:overflow-visible",children:[e.jsx("h3",{className:`text-xl font-bold mb-4 text-center ${i||"text-blue-400 dark:text-blue-400"}`,children:n||a.birthDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:w})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:h})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:f})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:l})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.dailyTimings}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr] items-center gap-x-4 gap-y-2 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunrise,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:p(t.sunRise)}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right sm:text-right",children:[a.sunset,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:p(t.sunSet)})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.astrologicalDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-x-4 gap-y-3 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:[L," (",A,")"]}),t.ashtaKoota.lagnesh&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagnesh,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.lagnesh})]}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:I[o.rashi-1]})]}),t.ashtaKoota.rashiLord&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.rashiLord,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.rashiLord})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:I[r.rashi-1]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.birthNakshatra,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.nakshatra.nameNepali}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.nakshatra.start,t.nakshatra.end,t.birthDetails.datetime)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-semibold",children:["पद ",p(t.nakshatra.pada),": "]}),c(t.nakshatra.padaStart,t.nakshatra.padaEnd,t.birthDetails.datetime)]}),o&&(t.nakshatra.nameNepali!==o.nakshatra||t.nakshatra.pada!==o.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[a.modernAstroInfo,": ",a.nakshatra,": ",o.nakshatra," ",a.pada,": ",p(o.nakshatraPada)]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.tithi,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.tithi.paksha,"  ",x(t.tithi.tithiNumber),"(",p(t.tithi.tithiNumber),")"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.tithi.start,t.tithi.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.yoga,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.yoga.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.yoga.start,t.yoga.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.karana,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.karana.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.karana.start,t.karana.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg text-left",children:S})]}),o&&(t.nakshatra.nameNepali!==o.nakshatra||t.nakshatra.pada!==o.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[a.modernAstroInfo,": ",D]})]}),t.ashtaKoota&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.gunaMilanDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr_auto_1fr] gap-x-4 gap-y-2 text-sm items-baseline",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.varna,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.varna}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.vasya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.vasya}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.gana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.gana}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.yoni,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.yoni}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.nadi,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.nadi}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.tatva,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.tatva}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.paya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.paya})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:a.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.backend,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.backend,": ",t.calculationMeta.version]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.ayanamsa,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.ayanamsa," (",t.calculationMeta.ayanamsaString,")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.houseSystem})]})]})]})]})},Q=t=>{if(!t||t==="N/A")return"N/A";try{const n=new Date(t);if(isNaN(n.getTime()))return"N/A";const i=E(n),d=p(i.year.toString()),x=ne[i.monthIndex],c=p(i.day.toString());return`${d} ${x} ${c}`}catch(n){return console.error("Date formatting error:",n),"N/A"}},re=({dashaSequence:t,title:n})=>{const[i,d]=m.useState(null),x=n===a.jaiminiDasha,c=o=>{d(r=>r===o?null:o)};return e.jsxs("div",{className:"kundali-card p-2 sm:p-6 mb-11 print:mb-2 rounded-lg bg-slate-200 dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:bg-white print:shadow-none print:border-none",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4 print:hidden",children:n}),x&&e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 -mt-3 mb-3 px-2 print:hidden",children:a.jaiminiProportionalNote}),e.jsx("div",{className:"print:hidden",children:e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:x?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:a.startsOn}),e.jsx("th",{className:"py-2 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.map(o=>{const r=o.planet+o.start,b=o.subDashas&&o.subDashas.length>0;return e.jsxs(kt.Fragment,{children:[e.jsxs("tr",{className:`border-b border-amber-100 dark:border-amber-800 ${b?"cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40":""}`,onClick:()=>b&&c(r),"aria-expanded":b&&i===r,"aria-controls":`antardasha-${r}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[b&&e.jsxs("div",{className:"relative group",children:[e.jsx(be,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${i===r?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:a.antarDasha_clickToExpand})]}),e.jsx("span",{className:`z-0 ${b?"":"ml-6"}`,children:x?o.planet:K[o.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:Q(o.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:Q(o.end)})]}),b&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${r}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${i===r?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:x?"अन्तरदशा राशि":a.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:x?"राशि":a.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.endsOn})]})}),e.jsx("tbody",{children:o.subDashas.map(g=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:x?g.planet:K[g.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:Q(g.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:Q(g.end)})]},g.planet+g.start))})]})]})})})})]},r)})})]})}),e.jsxs("div",{className:"hidden print:block mt-1",children:[e.jsx("h4",{className:"text-lg font-semibold mb-1 text-stone-800",children:n}),x&&e.jsx("p",{className:"text-xs text-stone-500 -mt-1 mb-1 px-2 italic",children:a.jaiminiProportionalNote}),e.jsxs("table",{className:"w-full text-left text-sm border-collapse mb-1",children:[e.jsx("thead",{className:"border-b-2 border-stone-400 text-stone-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 px-2",children:x?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-1 px-2",children:a.startsOn}),e.jsx("th",{className:"py-1 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.slice(0,12).map(o=>e.jsxs("tr",{className:"border-b border-stone-200",children:[e.jsx("td",{className:"py-1 px-2 font-medium text-stone-800",children:x?o.planet:K[o.planet]}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:Q(o.start)}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:Q(o.end)})]},`print-${o.planet}-${o.start}`))})]}),e.jsx("p",{className:"text-xs text-stone-600 px-2 italic",children:a.subDashaPrintNote})]})]})},Qe=({isOpen:t,onClose:n,onPrint:i})=>{const[d,x]=m.useState("confirm"),[c,o]=m.useState(5),r=typeof window<"u"&&!!window.Android;m.useEffect(()=>{t&&(x("confirm"),o(5))},[t]),m.useEffect(()=>{let w;return d==="countdown"&&c>0?w=setTimeout(()=>o(l=>l-1),1e3):d==="countdown"&&c===0&&x("ready"),()=>clearTimeout(w)},[d,c]);const b=()=>{r&&window.Android?.triggerFullScreenAd?(window.Android.triggerFullScreenAd(),x("countdown")):(i(),n())},g=()=>{r&&window.Android?.printPage?window.Android.printPage():i(),n()};return!t||!r?null:e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-sm w-full p-6 relative animate-in fade-in zoom-in duration-200",children:[e.jsx("button",{onClick:n,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx(Nt,{size:20})}),d==="confirm"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-blue-100 dark:bg-blue-900/30 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(vt,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Support ",a.project]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6",children:"Please watch a short ad to print this document. Your support helps us keep the app free."}),e.jsx("button",{onClick:b,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:"Watch Ad & Print"})]}),d==="countdown"&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2 animate-pulse",children:c}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Preparing print..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Please wait for the ad to finish"})]}),d==="ready"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-green-100 dark:bg-green-900/30 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ye,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Ready to Print"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6",children:"Thank you for your support!"}),e.jsxs("button",{onClick:g,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(Ye,{size:18})," Print Now"]})]})]})})},De=({chart:t,layout:n})=>{if(!t.chartData)return null;const i="planets"in t.chartData?t.chartData.planets:[],d="ascendant"in t.chartData?t.chartData.ascendant.sign:1,x="ascendant"in t.chartData?t.chartData.ascendant.degreesInSign:void 0,c="ascendant"in t.chartData?t.chartData.ascendant.nakshatra:void 0,o="ascendant"in t.chartData?t.chartData.ascendant.nakshatraPada:void 0;return e.jsxs("div",{className:"chart-instance dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-center dark:text-orange-400",children:t.title}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(Ut,{planets:i.map(r=>({planet:r.planet,rashi:"rashi"in r?r.rashi:r.sign,degreesInSign:"degreesInSign"in r?r.degreesInSign:void 0,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada})),ascendantSign:d,ascendantDegrees:x,ascendantNakshatra:c,ascendantNakshatraPada:o,chartType:t.type,layout:n})})]},t.title)},sa=({data:t,onReturnToForm:n,onNavigate:i})=>{const[d,x]=m.useState(!1),[c,o]=m.useState(!1),[r,b]=m.useState(()=>localStorage.getItem("kundaliChartLayout")||"square"),g=u=>{b(u),localStorage.setItem("kundaliChartLayout",u)},w=t.divisionalCharts.find(u=>u.name.includes("D9")),l=t.divisionalCharts.find(u=>u.name.includes("D10")),h=t.divisionalCharts.find(u=>u.name.includes("D3")),f=t.divisionalCharts.find(u=>u.name.includes("D12")),j=t.divisionalCharts.find(u=>u.name.includes("D4")),S=t.divisionalCharts.find(u=>u.name.includes("D60")),N=[{type:"lagna",title:a.rashiChart,chartData:t},{type:"chandra",title:a.chandraChart,chartData:t},{type:"navamsha",title:a.navamsaChart,chartData:w},{type:"dashamsa",title:a.dashamsaChart,chartData:l}],D=[{type:"drekkana",title:a.drekkanaChart,chartData:h},{type:"dwadamsha",title:a.dwadamshaChart,chartData:f},{type:"chaturthamsha",title:a.chaturthamshaChart,chartData:j},{type:"shashtiamsha",title:a.shashtiamshaChart,chartData:S}].filter(u=>u.chartData),L=new Date,A=E(L),k=`${p(A.year)} ${ne[A.monthIndex]} ${p(A.day)}`,v=L.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 print:bg-white rounded-xl shadow-lg print:shadow-none w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-2 print:space-y-2",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-orange-400 transition-colors duration-300 print:bg-white print:shadow-none",children:[e.jsx("h2",{className:"text-3xl self-center font-bold text-orange-600 dark:text-orange-400",children:a.kundaliOf(t.birthDetails.name)}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-700 dark:text-gray-400",children:[a.printedDate,": ",k," ",v]}),e.jsx("div",{className:"mt-2 text-xs text-orange-600 dark:text-orange-400 text-center px-2",children:a.kundaliDisclaimer})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 print:gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 print:gap-2",children:[e.jsx(Ce,{data:t}),e.jsx(Wt,{planets:t.planets})]})}),e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 print:hidden",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a.chartStyle}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-gray-700 p-1 rounded-xl shadow-inner border border-slate-200 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>g("lotus"),className:`px-4 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 ${r==="lotus"?"bg-orange-500 text-white shadow-md transform scale-105":"text-gray-500 dark:text-gray-400 hover:text-orange-500"}`,children:a.lotusStyle}),e.jsx("button",{onClick:()=>g("square"),className:`px-4 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 ${r==="square"?"bg-orange-500 text-white shadow-md transform scale-105":"text-gray-500 dark:text-gray-400 hover:text-orange-500"}`,children:a.squareStyle})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:N.map(u=>e.jsx(De,{chart:u,layout:r},u.type))}),D.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 transition-all duration-500 overflow-hidden ${d?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:d&&D.map(u=>e.jsx(De,{chart:u,layout:r},u.type))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{onClick:()=>x(!d),className:"flex items-center justify-center gap-2 mx-auto px-4 py-2 text-sm font-medium text-orange-600 dark:text-orange-400 bg-orange-100/50 dark:bg-orange-900/20 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/40 transition",children:[e.jsx("span",{children:d?a.showLessCharts:a.showMoreCharts}),e.jsx(be,{className:`w-4 h-4 transition-transform duration-300 ${d?"rotate-180":""}`})]})})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx("div",{className:"flex flex-wrap -mx-2 mt-2 pt-4 border-t border-gray-300 dark:border-gray-700",children:[...N,...D].map(u=>e.jsx("div",{className:"w-1/2 px-2 mb-4 break-inside-avoid-page ",children:e.jsx(De,{chart:u,layout:r})},`print-${u.type}`))})})]}),e.jsxs("div",{className:"space-y-4 print:space-y-2 print:pt-2",children:[e.jsx(re,{dashaSequence:t.dashaSequence,title:a.dashaPeriods}),t.tribhagiDasha?.length>0&&e.jsx(re,{dashaSequence:t.tribhagiDasha,title:a.tribhagiDasha}),t.yoginiDasha?.length>0&&e.jsx(re,{dashaSequence:t.yoginiDasha,title:a.yoginiDasha}),t.ashtottariDasha?.length>0&&e.jsx(re,{dashaSequence:t.ashtottariDasha,title:a.ashtottariDasha}),t.jaiminiDasha?.length>0&&e.jsx(re,{dashaSequence:t.jaiminiDasha,title:a.jaiminiDasha})]}),e.jsxs("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-4 mt-8 border-t border-gray-300",children:[e.jsx("p",{children:"Printed from nepdate web/android application."}),e.jsx("p",{className:"mt-1",children:e.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate",className:"text-orange-600 underline",children:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate"})}),e.jsxs("p",{children:["© ",new Date().getFullYear()," ",a.project]})]}),e.jsx("div",{className:"mt-8 mb-8 w-full px-4 text-center print:hidden",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-orange-600 dark:bg-orange-600 text-white px-6 py-2 rounded shadow-md hover:bg-orange-700 transition flex items-center gap-2",onClick:n,children:["← ",a.returnToForm]}),e.jsx("button",{className:"bg-amber-600 dark:bg-amber-500 text-white px-6 py-2 rounded shadow-md hover:bg-amber-700 transition flex items-center gap-2",onClick:()=>{i&&i("paramarsha",{source:"kundali",data:t})},children:"🧑‍🏫 परामर्श (Consult)"}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 transition flex items-center gap-2",onClick:()=>{window.Android?o(!0):ge()},children:[e.jsx(Je,{className:"w-4 h-4"})," ",a.print]})]})}),e.jsx(Qe,{isOpen:c,onClose:()=>o(!1),onPrint:ge})]})},Xt={name:"सुरज",dateSystem:"BS",bsYear:2050,bsMonth:2,bsDay:2,hour:10,minute:15,second:0,period:"AM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},Jt={name:"अम्रिता",dateSystem:"BS",bsYear:2053,bsMonth:8,bsDay:9,hour:2,minute:30,second:0,period:"PM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},ra=({onCalculate:t,isLoading:n,defaultValues:i})=>{const d=m.useRef(null),x=m.useRef(null),c=async()=>{const o=d.current?.validateAndGetData(),r=x.current?.validateAndGetData();if(o&&r){const[b,g]=await Promise.all([o,r]);b&&g&&t(b,g)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 dark:text-blue-300 mb-4 text-center",children:a.groomDetails}),e.jsx(Ze,{ref:d,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:i?.groom||Xt})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-pink-700 dark:text-pink-400 mb-4 text-center",children:a.brideDetails}),e.jsx(Ze,{ref:x,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:i?.bride||Jt})]})]}),e.jsx("div",{className:"pt-4 pb-16",children:e.jsx("button",{type:"button",onClick:c,disabled:n,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-orange-600 dark:hover:bg-orange-700 dark:disabled:bg-gray-500",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Xe,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):a.calculateComparison})})]})},O=({label:t,groomValue:n,brideValue:i,typeLabel:d,maxPoints:x,obtainedPoints:c})=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 last:border-b-0",children:[e.jsx("td",{className:"py-2 font-medium text-stone-800 dark:text-stone-100",children:t}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:n}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:i}),e.jsx("td",{className:"py-2 text-center text-blue-600 dark:text-blue-400 font-medium",children:d??""}),e.jsx("td",{className:"py-2 text-center text-stone-700 dark:text-stone-200",children:p(x)}),e.jsx("td",{className:"py-2 text-center font-semibold text-stone-800 dark:text-stone-100",children:p(c)})]}),na=({result:t,onReturnToForm:n,onNavigate:i})=>{const[d,x]=m.useState(!1),{groom:c,bride:o,score:r,conclusion:b,labels:g}=t,w=new Date,l=E(w),h=`${p(l.year)} ${ne[l.monthIndex]} ${p(l.day)}`,f=w.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 print:bg-white rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-0 print:m-0 print:rounded-none print:shadow-none",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center p-4 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsxs("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[c.birthDetails.name," र ",o.birthDetails.name," को गुण मिलान"]}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-700 dark:text-gray-400",children:[a.printedDate,": ",h," ",f]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ce,{data:c,title:a.groomDetails,titleClassName:"text-blue-700 dark:text-blue-300"}),e.jsx(Ce,{data:o,title:a.brideDetails,titleClassName:"text-pink-700 dark:text-pink-400"})]}),e.jsxs("div",{className:"kundali-card p-3 sm:p-5 rounded-lg overflow-x-auto bg-slate-200 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-600 dark:text-orange-400 mb-4",children:a.gunaMilanTableTitle}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.koota}),e.jsx("th",{className:"py-2 px-2",children:a.groom}),e.jsx("th",{className:"py-2 px-2",children:a.bride}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.kootaType}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.maxPoints}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.obtainedPoints})]})}),e.jsxs("tbody",{children:[e.jsx(O,{label:a.varna,groomValue:c.ashtaKoota.varna,brideValue:o.ashtaKoota.varna,typeLabel:g.varnaLabel,maxPoints:1,obtainedPoints:r.varna}),e.jsx(O,{label:a.vasya,groomValue:c.ashtaKoota.vasya,brideValue:o.ashtaKoota.vasya,typeLabel:g.vasyaLabel,maxPoints:2,obtainedPoints:r.vasya}),e.jsx(O,{label:a.tara,groomValue:c.nakshatra.nameNepali,brideValue:o.nakshatra.nameNepali,typeLabel:g.taraLabel,maxPoints:3,obtainedPoints:r.tara}),e.jsx(O,{label:a.yoni,groomValue:c.ashtaKoota.yoni,brideValue:o.ashtaKoota.yoni,typeLabel:g.yoniLabel,maxPoints:4,obtainedPoints:r.yoni}),e.jsx(O,{label:a.grahaMaitri,groomValue:c.ashtaKoota.rashiLord,brideValue:o.ashtaKoota.rashiLord,typeLabel:g.grahaMaitriLabel,maxPoints:5,obtainedPoints:r.grahaMaitri}),e.jsx(O,{label:a.gana,groomValue:c.ashtaKoota.gana,brideValue:o.ashtaKoota.gana,typeLabel:g.ganaLabel,maxPoints:6,obtainedPoints:r.gana}),e.jsx(O,{label:a.bhakoot,groomValue:I[c.planets.find(j=>j.planet==="MOON").rashi-1],brideValue:I[o.planets.find(j=>j.planet==="MOON").rashi-1],typeLabel:g.bhakootLabel,maxPoints:7,obtainedPoints:r.bhakoot}),e.jsx(O,{label:a.nadi,groomValue:c.ashtaKoota.nadi,brideValue:o.ashtaKoota.nadi,typeLabel:g.nadiLabel,maxPoints:8,obtainedPoints:r.nadi})]}),e.jsx("tfoot",{className:"border-t-2 border-amber-300 dark:border-amber-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"py-2 px-2 text-right text-stone-800 dark:text-stone-100",children:a.totalPoints}),e.jsx("td",{className:"px-2 text-center text-stone-800 dark:text-stone-100",children:p(36)}),e.jsx("td",{className:"px-2 text-center text-lg text-orange-600 dark:text-orange-400",children:p(r.total)})]})})]})]}),e.jsxs("div",{className:"kundali-card rounded-lg bg-slate-200 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:a.conclusion}),e.jsx("p",{className:"text-stone-800 dark:text-stone-100",children:b})]}),e.jsxs("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-4 mt-8 border-t border-gray-300",children:[e.jsx("p",{children:"Printed from nepdate web/android application."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate",className:"text-orange-600 underline",children:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate"}),e.jsx("br",{}),"© ",new Date().getFullYear()," ",a.project]})]}),e.jsxs("div",{className:"mt-8 mb-8 w-full px-4 text-center screen-only-footer print:hidden",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-orange-600 dark:bg-orange-600 text-white px-6 py-2 rounded shadow-md hover:bg-orange-700 dark:hover:bg-orange-800 transition flex items-center gap-2",onClick:n,children:["← ",a.returnToForm]}),e.jsx("button",{className:"bg-amber-600 dark:bg-amber-500 text-white px-6 py-2 rounded shadow-md hover:bg-amber-700 transition flex items-center gap-2",onClick:()=>{i&&i("paramarsha",{source:"guna-milan",data:t})},children:"🧑‍🏫 परामर्श (Consult)"}),e.jsx("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>{window.Android?x(!0):ge()},children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:a.mobilePrintHint})]}),e.jsx(Qe,{isOpen:d,onClose:()=>x(!1),onPrint:ge})]})},la=({onClose:t,onEdit:n,onView:i})=>{const[d,x]=m.useState([]);m.useEffect(()=>{try{const r=localStorage.getItem("savedKundalis");r&&x(JSON.parse(r))}catch(r){console.error("Failed to load saved kundalis:",r)}},[]);const c=r=>{if(window.confirm(a.deleteConfirm)){const b=d.filter(g=>g.id!==r);x(b),localStorage.setItem("savedKundalis",JSON.stringify(b))}},o=r=>{const b=new Date(r);return new Intl.DateTimeFormat("ne-NP-u-nu-deva",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(b)};return e.jsx("div",{className:"fixed inset-0 flex flex-wrap items-center justify-center bg-black/60 z-50 p-4 transition-opacity",onClick:t,children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] flex flex-wrap flex-col p-6",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-500 dark:text-blue-400",children:a.savedKundalis}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(Me,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:d.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:a.noSavedKundalis}):e.jsx("ul",{className:"space-y-3",children:d.map(r=>e.jsx("li",{className:"bg-slate-50 dark:bg-gray-700 p-3 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-300",children:r.type==="individual"?r.name:`${r.groomName} र ${r.brideName}`}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${r.type==="individual"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:r.type==="individual"?a.individual:a.comparison}),e.jsxs("span",{className:"ml-2",children:[a.savedOn," ",o(r.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>i(r),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded hover:bg-blue-600",children:a.view}),e.jsx("button",{onClick:()=>n(r),className:"px-3 py-1 text-sm text-gray-700 bg-gray-300 rounded hover:bg-gray-400 dark:bg-gray-500 dark:text-gray-100 dark:hover:bg-gray-400",children:a.edit}),e.jsx("button",{onClick:()=>c(r.id),className:"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600",children:a.delete})]})]})},r.id))})})]})})};export{na as C,sa as K,Qe as P,la as S,ra as a,Ze as b};
