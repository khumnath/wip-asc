import{r as x,j as e,a6 as ut,a7 as bt,a8 as pt,a9 as yt,aa as ft,J as jt,X as Nt,ab as kt,P as Ke}from"./vendor-react-BO-BQcH4.js";import{t as B,g as vt,a as wt,N as a,b as p,c as le,G as St,f as Dt,d as Ct,e as T,h as A,i as _,R as Ge,j as ve,k as Ue,l as Mt,m as we,r as Pt,n as Lt,o as he}from"./bikram-Dj6UnmYP.js";import{n as ge,T as ce,L as At,a as We,X as Ce,S as It,b as $t,C as ue,P as Xe}from"./data-DcBXQ_4R.js";import{t as Tt}from"./vendor-utils-y-iLWhYP.js";const Bt=ge.find(t=>t.romanization.toLowerCase()==="kathmandu"),xe=Bt??ge[0],Et=({label:t,children:l,...d})=>e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{...d,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:focus:bg-orange-400 dark:focus:border-orange-400",children:l}),e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:t}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 dark:text-gray-300",children:e.jsx(ue,{className:"w-4 h-4"})})]}),Ft=()=>{const t=pt();return x.useEffect(()=>{const l=setTimeout(()=>{try{t.invalidateSize()}catch{}},150);return()=>clearTimeout(l)},[t]),null},zt=({onClose:t,onLocationSelect:l,initialPosition:d})=>{const[o,i]=x.useState(d),c=()=>(yt({click(r){i([r.latlng.lat,r.latlng.lng])}}),e.jsx(ft,{position:o})),n=()=>{l(o[0],o[1]),t()};return e.jsx("div",{style:{position:"fixed",inset:0,top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:e.jsxs("div",{style:{width:"95%",maxWidth:960,height:620,display:"flex",flexDirection:"column",borderRadius:12,overflow:"hidden",background:void 0},className:"bg-slate-50 dark:bg-gray-800 dark:text-gray-200 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center border-b p-3 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:a.selectOnMap}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ce,{className:"w-5 h-5"})})]}),e.jsx("div",{style:{flex:1,minHeight:420,display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:e.jsxs(ut,{center:d,zoom:7,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},children:[e.jsx(bt,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Ft,{}),e.jsx(c,{})]},`${d[0]}-${d[1]}`)}),e.jsxs("div",{className:"border-t p-3 flex justify-between items-center dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Lat: ",o[0].toFixed(4),", Lon: ",o[1].toFixed(4)]}),e.jsx("button",{onClick:n,className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 dark:bg-orange-500 dark:text-gray-100 dark:hover:bg-orange-600",children:a.selectLocation})]})]})})},Ye=({children:t})=>e.jsx("div",{className:"grid grid-cols-3 border border-gray-300 rounded-md overflow-hidden divide-x divide-gray-300 focus-within:border-orange-500 focus-within:ring-1 focus-within:ring-orange-500 dark:border-gray-600 dark:divide-gray-600 dark:focus-within:border-orange-400 dark:focus-within:ring-orange-400",children:t}),re=({label:t,children:l,...d})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("select",{...d,className:"relative w-full appearance-none bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600",children:l}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 z-10 dark:text-gray-300",children:e.jsx(ue,{className:"w-4 h-4"})})]}),Rt=({label:t,type:l="number",...d})=>e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute top-1 left-2 text-xs text-gray-500 z-10 dark:text-gray-400",children:t}),e.jsx("input",{...d,type:l,className:"relative w-full bg-gray-100 pt-5 pb-1.5 px-2 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 z-0 dark:bg-gray-700 dark:text-gray-200 dark:focus:bg-gray-600"})]}),_t=1900,Ot=2150,Kt=1960,Yt=2210,He=x.forwardRef(({onCalculate:t,isLoading:l,hideSubmitButton:d=!1,defaultValues:o,submitLabel:i},c)=>{const n=new Date,r=B(n),[f,u]=x.useState(o?.name||"प्रयोगकर्ता"),[g,b]=x.useState(o?.dateSystem||"BS"),[m,j]=x.useState(!1),[v,w]=x.useState("search"),[k,C]=x.useState(n.getFullYear()),[I,E]=x.useState(n.getMonth()+1),[N,S]=x.useState(n.getDate()),[h,D]=x.useState(o?.bsYear||r.year),[P,Z]=x.useState(o?.bsMonth||r.monthIndex+1),[q,L]=x.useState(o?.bsDay||r.day),F=x.useRef(null),[V,G]=x.useState(!1),[O,te]=x.useState(null);let $=n.getHours(),K="AM";$===0?($=12,K="AM"):$===12?K="PM":$>12?($=$-12,K="PM"):K="AM";const[U,oe]=x.useState(o?.period||K),[M,Qe]=x.useState(o?.hour||$),[Me,et]=x.useState(o?.minute||n.getMinutes()),[Pe,tt]=x.useState(o?.second||n.getSeconds()),de=o?.location||xe,[Y,Le]=x.useState(de),[W,be]=x.useState(de.latitude),[X,pe]=x.useState(de.longitude),[ye,ae]=x.useState(de.zoneId),[at,Ae]=x.useState(!1),[ie,st]=x.useState(""),rt=x.useMemo(()=>{const s=ie.trim().toLowerCase();return s?ge.filter(y=>y.romanization.toLowerCase().includes(s)||y.name.includes(ie.trim())):ge},[ie]);x.useEffect(()=>{if(!(typeof W!="number"||typeof X!="number"||isNaN(W)||isNaN(X)))try{const s=Tt(W,X),y=ce.some(H=>H.zoneId===s);ae(y?s:xe?.zoneId??"Asia/Kathmandu")}catch{ae(xe?.zoneId??"Asia/Kathmandu")}},[W,X,xe?.zoneId]);const nt=x.useMemo(()=>Array.from({length:12},(s,y)=>y+1),[]),Ie=x.useMemo(()=>Array.from({length:60},(s,y)=>y),[]),J=x.useMemo(()=>{const y=(g==="BS"?h:k)||(g==="BS"?r.year:n.getFullYear());return g==="BS"?vt(y,P-1).totalDays:wt(y,I)},[g,h,P,k,I,r.year,n]);x.useEffect(()=>{g==="BS"&&q>J&&L(J),g==="AD"&&N>J&&S(J)},[J,g,q,N]);const lt=s=>{const y=s.target.value,z=Dt(y).replace(/[^0-9]/g,"");if(z===""){g==="BS"?D(null):C(null);return}const Q=parseInt(z,10);isNaN(Q)||(g==="BS"?D(Q):C(Q))},ot=()=>{const s=g==="BS"?h:k;F.current=s,g==="BS"?D(null):C(null)},dt=()=>{const s=g==="BS"?h:k;(s===null||String(s).trim()==="")&&(g==="BS"?D(F.current):C(F.current))},fe=()=>{const s=new Date,y=B(s);C(s.getFullYear()),E(s.getMonth()+1),S(s.getDate()),D(y.year),Z(y.monthIndex+1),L(y.day)},it=s=>{Le(s),be(s.latitude),pe(s.longitude),ae(s.zoneId),j(!1)},ct=(s,y)=>{be(s),pe(y),Le({name:`${s.toFixed(4)}, ${y.toFixed(4)}`,romanization:"Manual Selection",latitude:s,longitude:y,zoneId:ye,offset:ce.find(H=>H.zoneId===ye)?.offset??5.75}),j(!1)},$e=()=>{let s=h,y=k;if(s===null&&y===null&&(fe(),s=r.year,y=n.getFullYear()),(g==="BS"?s:k)===null)return null;const z=se=>se.toString().padStart(2,"0");let Q=y??n.getFullYear(),Ee=I,Fe=N;if(g==="BS"){const se=s??r.year,ke=Ct(se,P-1,q);Q=ke.getFullYear(),Ee=ke.getMonth()+1,Fe=ke.getDate()}let je=M;U==="PM"&&M<12&&(je+=12),U==="AM"&&M===12&&(je=0);const gt=`${Q}-${z(Ee)}-${z(Fe)}T${z(je)}:${z(Me)}:${z(Pe)}`,ze=Y.latitude,Re=Y.longitude,Ne=Y.zoneId,_e=ce.find(se=>se.zoneId===Ne),Oe=_e?_e.offset:5.75;return{name:f,datetime:gt,latitude:ze,longitude:Re,zoneId:Ne,offset:Oe,location:{name:Y.name,romanization:Y.romanization,latitude:ze,longitude:Re,zoneId:Ne,offset:Oe},options:{zodiac:"SIDEREAL",ayanamsa:"LAHIRI",houseSystem:"WHOLE_SIGN",divisionalCharts:[9],dashaSystem:"VIMSHOTTARI"}}},xt=()=>{const s=g==="BS"?h:k;if(s===null||String(s).length<4)return!1;const[y,H]=g==="BS"?[Kt,Yt]:[_t,Ot];return!(s<y||s>H)},Te=()=>new Promise(s=>{xt()?s($e()):(fe(),G(!0),te(()=>s))});x.useImperativeHandle(c,()=>({validateAndGetData:Te}));const mt=()=>{G(!1);const s=$e();O&&(O(s),te(null))},ht=()=>{G(!1),O&&(O(null),te(null))},Be=async s=>{s&&s.preventDefault();const y=await Te();y&&t(y)};return x.useEffect(()=>{if(o?.autoSubmit){const s=setTimeout(()=>Be(),500);return()=>clearTimeout(s)}},[o]),e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:Be,className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"name",value:f,onChange:s=>u(s.target.value),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"}),e.jsx("label",{htmlFor:"name",className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400",children:a.name})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>{b("BS")},className:`px-4 py-1 text-sm rounded ${g==="BS"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.bs}),e.jsx("button",{type:"button",onClick:()=>{b("AD")},className:`px-4 py-1 text-sm rounded ${g==="AD"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.ad})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsxs(Ye,{children:[e.jsx(Rt,{label:a.year,value:g==="BS"?p(h??""):k??"",onChange:lt,onFocus:ot,onBlur:dt,type:"tel",inputMode:"numeric",autoComplete:"off"}),e.jsx(re,{label:a.month,value:g==="BS"?P:I,onChange:s=>g==="BS"?Z(Number(s.target.value)):E(Number(s.target.value)),children:Array.from({length:12},(s,y)=>e.jsx("option",{value:y+1,children:g==="BS"?le[y]:St[y]},y+1))}),e.jsx(re,{label:a.day,value:g==="BS"?q:N,onChange:s=>g==="BS"?L(Number(s.target.value)):S(Number(s.target.value)),children:Array.from({length:J},(s,y)=>e.jsx("option",{value:y+1,children:p(y+1)},y+1))})]})}),e.jsx("button",{type:"button",onClick:fe,className:"px-3 py-2 text-sm bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500","aria-label":a.resetToToday,children:a.resetToToday})]})}),e.jsxs(Ye,{children:[e.jsx(re,{label:a.hour,value:M,onChange:s=>Qe(Number(s.target.value)),children:nt.map(s=>e.jsx("option",{value:s,children:p(s)},s))}),e.jsx(re,{label:a.minute,value:Me,onChange:s=>et(Number(s.target.value)),children:Ie.map(s=>e.jsx("option",{value:s,children:p(s)},s))}),e.jsx(re,{label:a.second,value:Pe,onChange:s=>tt(Number(s.target.value)),children:Ie.map(s=>e.jsx("option",{value:s,children:p(s)},s))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex p-1 bg-gray-200 dark:bg-gray-700 rounded-md",children:[e.jsx("button",{type:"button",onClick:()=>oe("AM"),className:`px-4 py-1 text-sm rounded ${U==="AM"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.am}),e.jsx("button",{type:"button",onClick:()=>oe("PM"),className:`px-4 py-1 text-sm rounded ${U==="PM"?"bg-orange-600 text-white":"text-gray-600 dark:text-gray-300"}`,children:a.pm})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"absolute -top-2 left-2.5 bg-gray-100 px-1 text-xs text-gray-500 dark:bg-gray-700 dark:text-gray-400 z-10",children:a.location}),e.jsxs("button",{type:"button",onClick:()=>{j(!0),w("search")},className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 flex justify-between items-center text-left",children:[e.jsxs("span",{children:[Y.name," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["(",Y.romanization,")"]})]}),e.jsx(At,{className:"w-4 h-4 text-gray-500"})]})]}),!d&&e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-orange-600 dark:hover:bg-orange-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):i||a.calculate})})]}),m&&e.jsx("div",{className:"fixed inset-0 flex items-start justify-center bg-black/60 z-50 p-4 pt-8 sm:pt-8 transition-opacity",onClick:()=>j(!1),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 w-full h-3/6 sm:h-3/5 sm:max-h-[90vh] sm:rounded-lg shadow-xl max-w-lg p-4 flex flex-col transition-transform",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold",children:v==="search"?a.searchOrSelectLocation:a.enterManually}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-100",children:e.jsx(Ce,{className:"w-5 h-5"})})]}),v==="search"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative my-4",children:[e.jsx(It,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a.locationSearchPlaceholder,value:ie,onChange:s=>st(s.target.value),className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:rt.map(s=>e.jsxs("div",{onClick:()=>it(s),className:"p-2.5 cursor-pointer hover:bg-orange-100 dark:hover:bg-orange-900/50 rounded-md text-sm flex justify-between",children:[e.jsx("span",{children:s.name}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:s.romanization})]},s.name))}),e.jsx("div",{className:"pt-3 mt-3 border-t dark:border-gray-700 text-center",children:e.jsxs("button",{onClick:()=>w("manual"),className:"text-sm text-orange-600 dark:text-orange-400 hover:underline",children:[a.cantFindLocation," ",a.enterManuallyOrMap]})})]}):e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"latitude",value:W,onChange:s=>be(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"}),e.jsx("label",{htmlFor:"latitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.latitudeShort})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.0001",id:"longitude",value:X,onChange:s=>pe(parseFloat(s.target.value)),required:!0,className:"w-full bg-gray-100 border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-800 focus:outline-none focus:bg-slate-200 focus:border-orange-400 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:focus:bg-gray-600 dark:focus:border-orange-400"}),e.jsx("label",{htmlFor:"longitude",className:"absolute -top-2 left-2.5 bg-slate-200 px-1 text-xs text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:a.longitudeShort})]})]}),e.jsx(Et,{label:a.timezone,value:ye,onChange:s=>ae(s.target.value),children:ce.map(s=>e.jsx("option",{value:s.zoneId,children:s.label},s.zoneId))}),e.jsxs("button",{type:"button",onClick:()=>Ae(!0),className:"w-full flex justify-center items-center gap-2 py-2 bg-gray-200 hover:bg-gray-300 rounded-md dark:bg-gray-600 dark:hover:bg-gray-500","aria-label":a.selectOnMap,children:[e.jsx($t,{className:"w-5 h-5"})," ",a.selectOnMap]}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:()=>w("search"),className:"text-sm text-orange-600 dark:text-orange-400 hover:underline",children:["← ",a.backToSearch]})})]})]})}),at&&e.jsx(zt,{onClose:()=>Ae(!1),onLocationSelect:ct,initialPosition:[W,X]}),V&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/60 z-50 p-4 transition-opacity",children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-700 dark:text-amber-400",children:a.invalidDateTitle}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:a.invalidDateMessage(g)}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{onClick:ht,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-300 rounded-md hover:bg-gray-400 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:a.edit}),e.jsx("button",{onClick:mt,className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md hover:bg-blue-600",children:a.proceed})]})]})})]})}),Ht=({cx:t,cy:l,onSelect:d})=>e.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[e.jsx("defs",{children:e.jsx("path",{id:"lotus-petal",d:`M 200 200
             C 150 150, 150 50, 200 0
             C 250 50, 250 150, 200 200 Z`})}),Array.from({length:12},(o,i)=>e.jsx("use",{href:"#lotus-petal",fill:"transparent",className:"overlay-wedge",style:{cursor:"pointer",pointerEvents:"auto"},transform:`rotate(${-i*30-90}, ${t}, ${l})`,onClick:()=>d(i+1)},i))]});function Ze(t){const l=Math.floor(t),d=Math.floor((t-l)*60);return`${p(l)}°${p(d)}′`}function qe(t){const l=Math.round(t/30*100);return`${p(l)}%`}const Zt=[{path:"M 50,0 L 75,25 L 50,50 L 25,25 Z",centroid:{x:50,y:24},rashiPos:{x:50,y:42}},{path:"M 50,0 L 25,25 L 0,0 Z",centroid:{x:28,y:10},rashiPos:{x:12,y:8}},{path:"M 0,0 L 25,25 L 0,50 Z",centroid:{x:10,y:28},rashiPos:{x:8,y:12}},{path:"M 0,50 L 25,25 L 50,50 L 25,75 Z",centroid:{x:24,y:50},rashiPos:{x:42,y:50}},{path:"M 0,50 L 25,75 L 0,100 Z",centroid:{x:10,y:72},rashiPos:{x:8,y:88}},{path:"M 0,100 L 25,75 L 50,100 Z",centroid:{x:28,y:90},rashiPos:{x:12,y:92}},{path:"M 50,100 L 25,75 L 50,50 L 75,75 Z",centroid:{x:50,y:76},rashiPos:{x:50,y:58}},{path:"M 50,100 L 75,75 L 100,100 Z",centroid:{x:72,y:90},rashiPos:{x:88,y:92}},{path:"M 100,100 L 75,75 L 100,50 Z",centroid:{x:90,y:72},rashiPos:{x:92,y:88}},{path:"M 100,50 L 75,25 L 50,50 L 75,75 Z",centroid:{x:76,y:50},rashiPos:{x:58,y:50}},{path:"M 100,50 L 75,25 L 100,0 Z",centroid:{x:90,y:28},rashiPos:{x:92,y:12}},{path:"M 50,0 L 75,25 L 100,0 Z",centroid:{x:72,y:10},rashiPos:{x:88,y:8}}],qt=({planets:t,ascendantSign:l,ascendantDegrees:d,chartType:o="lagna"})=>{const[i,c]=x.useState(null),r=t.find(b=>b.planet==="MOON")?.rashi??1,f=o==="chandra"?r:l,u=x.useMemo(()=>{const b=new Map;return t.forEach(m=>{const v=(m.rashi-f+12)%12+1;b.has(v)||b.set(v,[]),b.get(v).push(m)}),b},[t,f]),g=b=>(f+b-2)%12+1;return e.jsxs("div",{className:"sq-chart-wrapper font-devanagari relative select-none",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full bg-[rgba(255,250,240,0.6)] dark:bg-[rgba(31,41,55,0.6)] border-[1.5px] border-[#d2b48c] dark:border-[#4b5563] rounded-2xl overflow-hidden",children:[Zt.map((b,m)=>{const j=m+1,v=g(j),w=u.get(j)||[];return e.jsxs("g",{className:"cursor-pointer group",onClick:()=>c(j),children:[e.jsx("path",{d:b.path,className:"fill-transparent hover:fill-orange-500/10 dark:hover:fill-orange-400/10 transition-colors duration-200"}),e.jsx("text",{x:b.rashiPos.x,y:b.rashiPos.y,className:"fill-[#f43f28] dark:fill-[#f87171] font-bold text-[4px] pointer-events-none",textAnchor:"middle",dominantBaseline:"middle",children:p(v)}),e.jsx("foreignObject",{x:b.centroid.x-12,y:b.centroid.y-10,width:"24",height:"20",className:"pointer-events-none",children:e.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-[0.5px] w-full h-full text-[2.8px] leading-tight text-[#423729] dark:text-[#d1d5db]",children:[j===1&&o!=="chandra"&&e.jsx("span",{className:"text-[#b91c1c] dark:text-[#fe2a2a] font-bold",children:T.ASCENDANT}),j===1&&o==="chandra"&&e.jsxs("span",{className:"text-[#b91c1c] dark:text-[#fe2a2a] font-bold",children:[T.ASCENDANT,"(चं)"]}),w.map(k=>o==="chandra"&&j===1&&k.planet==="MOON"?null:e.jsx("span",{className:k.retrograde?"text-[#2563eb] dark:text-[#60a5fa] font-bold":"",children:T[k.planet]},k.planet))]})})]},j)}),e.jsxs("g",{className:"stroke-[#d2b48c] dark:stroke-[#4b5563] pointer-events-none",strokeWidth:"0.5",fill:"none",children:[e.jsx("path",{d:"M 0,0 L 100,100 M 100,0 L 0,100"}),e.jsx("path",{d:"M 50,0 L 0,50 L 50,100 L 100,50 Z"})]})]}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50 px-4",onClick:()=>c(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:b=>b.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",p(i)," – ",A[g(i)-1]," (स्वामी:"," ",_[Ge[g(i)]],")"]}),i===1&&o!=="chandra"&&d!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[T.ASCENDANT," (",A[l-1],")"]}),e.jsxs("span",{children:[Ze(d)," (",qe(d),")"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded mt-1",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(d/30*100)}%`}})})]}),(u.get(i)||[]).map(b=>{const m=b.degreesInSign!==void 0?Math.round(b.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:b.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:_[b.planet]}),b.degreesInSign!==void 0&&e.jsxs("span",{children:[Ze(b.degreesInSign)," (",qe(b.degreesInSign),")"]})]}),m!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded mt-1",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${m}%`}})})]},b.planet)})]})})]})},Vt={10:0,11:-30,12:-60,1:-90,2:-120,3:-150,4:-180,5:-210,6:-240,7:-270,8:-300,9:-330};function me(t){const l=Math.floor(t),d=Math.floor((t-l)*60);return`${p(l)}°${p(d)}′`}function Ve(t){const l=Math.round(t/30*100);return`${p(l)}%`}const Gt=({planets:t,ascendantSign:l,ascendantDegrees:d,ascendantNakshatra:o,ascendantNakshatraPada:i,chartType:c="lagna",layout:n="lotus"})=>{const[r,f]=x.useState(null),u=t.find(m=>m.planet==="MOON"),g=u?.rashi??1,b=x.useMemo(()=>{const m=new Map;return t.forEach(j=>{const v=j.rashi,w=c==="chandra"?(v-g+12)%12+1:v;m.has(w)||m.set(w,[]),m.get(w).push(j)}),m},[t,c,g]);return e.jsxs("div",{className:"birth-chart-wrapper text-stone-800 dark:text-stone-100",children:[n==="square"?e.jsx(qt,{planets:t,ascendantSign:l,ascendantDegrees:d,ascendantNakshatra:o,ascendantNakshatraPada:i,chartType:c}):e.jsxs("div",{className:"birth-chart",children:[Array.from({length:12},(m,j)=>j+1).map(m=>{const j=b.get(m)||[],v=Vt[m];if(v===void 0)return null;const w=[];return c!=="chandra"&&m===l&&w.push(e.jsxs("div",{className:"planet-item ascendant",children:[e.jsx("span",{children:T.ASCENDANT}),d!==void 0&&e.jsx("span",{className:"planet-deg",children:me(d)})]},"asc")),c==="chandra"&&m===1&&w.push(e.jsx("div",{className:"planet-item ascendant",children:e.jsxs("span",{children:[T.ASCENDANT," (चन्द्र)"]})},"asc-chandra")),j.forEach(k=>{w.push(e.jsxs("div",{className:"planet-item",children:[e.jsx("span",{className:k.retrograde?"retrograde":"",children:T[k.planet]}),k.degreesInSign!==void 0&&e.jsx("span",{className:"planet-deg",children:me(k.degreesInSign)})]},k.planet))}),e.jsxs("div",{className:"petal",style:{transform:`translateX(-50%) rotate(${v}deg)`},children:[e.jsx("div",{className:"rashi-number font-semibold",children:p(m)}),e.jsx("div",{className:"planets-container",children:w})]},m)}),e.jsx("div",{className:"chart-center-dot text-2xl font-bold dark:text-red-400",children:"ॐ"}),e.jsx(Ht,{cx:200,cy:200,onSelect:m=>f(m)})]}),r&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",onClick:()=>f(null),children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 dark:text-stone-100 rounded-lg shadow-lg p-6 max-w-md w-full transition-colors duration-300",onClick:m=>m.stopPropagation(),children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 text-blue-600 dark:text-blue-400",children:["घर ",p(r)," – ",A[r-1]," (स्वामी:"," ",_[Ge[r]],")"]}),c!=="chandra"&&r===l&&d!==void 0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsxs("span",{children:[T.ASCENDANT," (",A[l-1],")"]}),e.jsxs("span",{children:[me(d)," (",Ve(d),")"]})]}),o&&i&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[ve[o],p(i)]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round(d/30*100)}%`}})})]}),c==="chandra"&&r===1&&u&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:e.jsxs("span",{children:[T.ASCENDANT," (चन्द्र)"]})}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-green-500 h-2 rounded",style:{width:`${Math.round((u.degreesInSign||0)/30*100)}%`}})}),u.nakshatra&&u.nakshatraPada&&e.jsxs("div",{className:"text-sm text-red-600 dark:text-red-400 font-semibold mt-1",children:["जनम नक्षत्र:"," ",ve[u.nakshatra],p(u.nakshatraPada)]})]}),(b.get(r)||[]).map(m=>{if(c==="chandra"&&r===1&&m.planet==="MOON")return null;const j=m.degreesInSign!==void 0?Math.round(m.degreesInSign/30*100):null;return e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-stone-800 dark:text-stone-100",children:[e.jsx("span",{className:m.retrograde?"font-bold text-blue-600 dark:text-blue-400":"",children:_[m.planet]}),m.degreesInSign!==void 0&&e.jsxs("span",{children:[me(m.degreesInSign)," (",Ve(m.degreesInSign),")"]})]}),m.nakshatra&&m.nakshatraPada&&e.jsxs("div",{className:"text-sm ml-2 text-gray-600 dark:text-gray-400",children:[ve[m.nakshatra],p(m.nakshatraPada)]}),j!==null&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded",style:{width:`${j}%`}})})]},m.planet)})]})})]})},Ut=({planets:t})=>e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg overflow-x-auto dark:bg-gray-800 dark:text-stone-100 transition-colors duration-300 print:bg-white print:shadow-none print:border-none print:break-inside-avoid",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4",children:a.planetaryPositions}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.planet}),e.jsx("th",{className:"py-2 px-2",children:a.rashi}),e.jsx("th",{className:"py-2 px-2",children:a.degrees}),e.jsx("th",{className:"py-2 px-2",children:a.nakshatra}),e.jsx("th",{className:"py-2 px-2",children:a.pada})]})}),e.jsx("tbody",{children:t.map(l=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 hover:bg-amber-50/70 dark:hover:bg-gray-800 transition-colors duration-200",children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100",children:[_[l.planet],l.retrograde&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400 ml-1",children:["(",a.retrograde,")"]})]}),e.jsx("td",{className:"py-2 px-2",children:A[l.rashi-1]}),e.jsx("td",{className:"py-2 px-2 font-mono",children:Ue(l.degreesInSign)}),e.jsx("td",{className:"py-2 px-2",children:l.nakshatra}),e.jsx("td",{className:"py-2 px-2",children:p(l.nakshatraPada)})]},l.planet))})]})]}),De=({data:t,title:l,titleClassName:d})=>{const o=N=>{if(!N)return"?";try{const S=new Date(N),h=S.getUTCHours(),D=S.getUTCMinutes(),P=Lt(h),Z=h%12===0?12:h%12;return`${p(Z)}:${p(D.toString().padStart(2,"0"))} ${P}`}catch{return"?"}};function i(N){let S,h;if(N>=1&&N<=15)S=N,h="शुक्ल पक्ष";else if(N>=16&&N<=30)S=N-15,h="कृष्ण पक्ष";else return`अवैध तिथि (${N})`;return Pt(S,h)}const c=(N,S,h)=>{if(!N||!S||!h)return"?";try{const D=oe=>{const M=new Date(oe);return new Date(M.getUTCFullYear(),M.getUTCMonth(),M.getUTCDate(),M.getUTCHours(),M.getUTCMinutes(),M.getUTCSeconds())},P=D(h),Z=D(N),q=D(S),L=B(P),F=B(Z),V=B(q),G=o(N),O=o(S),te=F.year===L.year&&F.monthIndex===L.monthIndex&&F.day===L.day,$=V.year===L.year&&V.monthIndex===L.monthIndex&&V.day===L.day,K=te?G:`${p(F.day)} गते ${G}`,U=$?O:`${p(V.day)} गते ${O}`;return`${K} देखि ${U} सम्म`}catch{return"N/A"}},n=t.planets.find(N=>N.planet==="MOON"),r=t.planets.find(N=>N.planet==="SUN"),f=new Date(t.birthDetails.datetime),u=B(f),g=`${p(u.year)} ${le[u.monthIndex]} ${p(u.day)}`,b=Mt[f.getDay()],m=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(f),j=new Intl.DateTimeFormat("ne-NP",{hour:"numeric",minute:"numeric",hour12:!0}).format(f),v=we[t.nakshatra.index],w=v?v.syllables[t.nakshatra.pada-1]:"?";function k(N,S){const h=we.findIndex(P=>P.name===N);return h===-1?"?":we[h].syllables[S-1]||"?"}const C=n?k(n.nakshatra,n.nakshatraPada):"?",I=A[t.ascendant.sign-1],E=Ue(t.ascendant.degreesInSign);return e.jsxs("div",{className:"kundali-card p-4 sm:p-6 rounded-lg bg-slate-200 print:bg-white dark:bg-gray-800 print:shadow-none print:border-none print:h-auto print:overflow-visible",children:[e.jsx("h3",{className:`text-xl font-bold mb-4 text-center ${d||"text-blue-400 dark:text-blue-400"}`,children:l||a.birthDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start ",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateBS,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:g})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthDateAD,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:m})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.birthTime,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:j})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.dayOfWeek,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:b})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.dailyTimings}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr] items-center gap-x-4 gap-y-2 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunrise,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:p(t.sunRise)}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right sm:text-right",children:[a.sunset,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:p(t.sunSet)})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.astrologicalDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-x-4 gap-y-3 text-sm",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagna,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:[I," (",E,")"]}),t.ashtaKoota.lagnesh&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.lagnesh,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.lagnesh})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.moonSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:A[n.rashi-1]})]}),t.ashtaKoota.rashiLord&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.rashiLord,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:t.ashtaKoota.rashiLord})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.sunSign,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100 text-left",children:A[r.rashi-1]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.birthNakshatra,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.nakshatra.nameNepali}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.nakshatra.start,t.nakshatra.end,t.birthDetails.datetime)}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsxs("span",{className:"font-semibold",children:["पद ",p(t.nakshatra.pada),": "]}),c(t.nakshatra.padaStart,t.nakshatra.padaEnd,t.birthDetails.datetime)]}),n&&(t.nakshatra.nameNepali!==n.nakshatra||t.nakshatra.pada!==n.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[a.modernAstroInfo,": ",a.nakshatra,": ",n.nakshatra," ",a.pada,": ",p(n.nakshatraPada)]})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.tithi,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.tithi.paksha,"  ",i(t.tithi.tithiNumber),"(",p(t.tithi.tithiNumber),")"]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.tithi.start,t.tithi.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.yoga,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.yoga.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.yoga.start,t.yoga.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.karana,":"]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.karana.name}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(t.karana.start,t.karana.end,t.birthDetails.datetime)})]}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400 text-right",children:[a.suggestedSyllable,":"]}),e.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-600 text-lg text-left",children:w})]}),n&&(t.nakshatra.nameNepali!==n.nakshatra||t.nakshatra.pada!==n.nakshatraPada)&&e.jsxs("span",{className:"font-semibold text-green-700 dark:text-green-600",children:[a.modernAstroInfo,": ",C]})]}),t.ashtaKoota&&e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-3",children:a.gunaMilanDetails}),e.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto_1fr] sm:grid-cols-[auto_1fr_auto_1fr_auto_1fr] gap-x-4 gap-y-2 text-sm items-baseline",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.varna,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.varna}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.vasya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.vasya}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.gana,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.gana}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.yoni,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.yoni}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.nadi,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.nadi}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.tatva,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.tatva}),e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.paya,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.ashtaKoota.paya})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t-2 border-amber-200 dark:border-amber-700 print:break-inside-avoid",children:[e.jsx("h3",{className:"text-lg font-bold text-blue-400 dark:text-blue-400 mb-2",children:a.calculationDetails}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-2 text-sm",children:[e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.backend,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.backend,": ",t.calculationMeta.version]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.ayanamsa,":"]}),e.jsxs("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:[t.calculationMeta.ayanamsa," (",t.calculationMeta.ayanamsaString,")"]})]}),e.jsxs("div",{className:"flex gap-1 items-start",children:[e.jsxs("span",{className:"text-stone-500 dark:text-stone-400",children:[a.houseSystem,":"]}),e.jsx("span",{className:"font-semibold text-stone-800 dark:text-stone-100",children:t.calculationMeta.houseSystem})]})]})]})]})},ee=t=>{if(!t||t==="N/A")return"N/A";try{const l=new Date(t);if(isNaN(l.getTime()))return"N/A";const d=B(l),o=p(d.year.toString()),i=le[d.monthIndex],c=p(d.day.toString());return`${o} ${i} ${c}`}catch(l){return console.error("Date formatting error:",l),"N/A"}},ne=({dashaSequence:t,title:l})=>{const[d,o]=x.useState(null),i=l===a.jaiminiDasha,c=n=>{o(r=>r===n?null:n)};return e.jsxs("div",{className:"kundali-card p-2 sm:p-6 mb-11 print:mb-2 rounded-lg bg-slate-200 dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:bg-white print:shadow-none print:border-none",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400 dark:text-blue-400 mb-4 print:hidden",children:l}),i&&e.jsx("p",{className:"text-xs text-stone-500 dark:text-stone-400 -mt-3 mb-3 px-2 print:hidden",children:a.jaiminiProportionalNote}),e.jsx("div",{className:"print:hidden",children:e.jsxs("table",{className:"w-full text-left text-sm sm:text-base border-collapse",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:i?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-2 px-2",children:a.startsOn}),e.jsx("th",{className:"py-2 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.map(n=>{const r=n.planet+n.start,f=n.subDashas&&n.subDashas.length>0;return e.jsxs(jt.Fragment,{children:[e.jsxs("tr",{className:`border-b border-amber-100 dark:border-amber-800 ${f?"cursor-pointer hover:bg-amber-50/70 dark:hover:bg-amber-900/40":""}`,onClick:()=>f&&c(r),"aria-expanded":f&&d===r,"aria-controls":`antardasha-${r}`,children:[e.jsxs("td",{className:"py-2 px-2 font-medium text-stone-800 dark:text-stone-100 flex items-center relative",children:[f&&e.jsxs("div",{className:"relative group",children:[e.jsx(ue,{className:`w-4 h-4 mr-2 text-amber-700 dark:text-blue-400 transition-transform duration-300 ${d===r?"rotate-180":""}`}),e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-1 px-2 py-1 bg-zinc-800 text-white text-xs rounded shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-[999] dark:bg-gray-800 dark:text-stone-200",children:a.antarDasha_clickToExpand})]}),e.jsx("span",{className:`z-0 ${f?"":"ml-6"}`,children:i?n.planet:_[n.planet]})]}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:ee(n.start)}),e.jsx("td",{className:"py-2 px-2 text-stone-700 dark:text-stone-200",children:ee(n.end)})]}),f&&e.jsx("tr",{className:"bg-slate-200 dark:bg-gray-800",children:e.jsx("td",{colSpan:3,className:"p-0 border-none",children:e.jsx("div",{id:`antardasha-${r}`,className:`overflow-hidden transition-all duration-500 ease-in-out ${d===r?"max-h-[1000px]":"max-h-0"}`,children:e.jsxs("div",{className:"p-4 bg-amber-50/50 dark:bg-amber-900/20",children:[e.jsx("h4",{className:"font-semibold text-blue-400 dark:text-blue-400 mb-2 pl-2",children:i?"अन्तरदशा राशि":a.antarDasha}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-stone-500 dark:text-stone-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:i?"राशि":a.planet}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.startsOn}),e.jsx("th",{className:"font-medium py-1 px-2 text-left",children:a.endsOn})]})}),e.jsx("tbody",{children:n.subDashas.map(u=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-amber-800 last:border-b-0",children:[e.jsx("td",{className:"py-1.5 px-2 text-stone-800 dark:text-stone-100",children:i?u.planet:_[u.planet]}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:ee(u.start)}),e.jsx("td",{className:"py-1.5 px-2 text-stone-700 dark:text-stone-200",children:ee(u.end)})]},u.planet+u.start))})]})]})})})})]},r)})})]})}),e.jsxs("div",{className:"hidden print:block mt-1",children:[e.jsx("h4",{className:"text-lg font-semibold mb-1 text-stone-800",children:l}),i&&e.jsx("p",{className:"text-xs text-stone-500 -mt-1 mb-1 px-2 italic",children:a.jaiminiProportionalNote}),e.jsxs("table",{className:"w-full text-left text-sm border-collapse mb-1",children:[e.jsx("thead",{className:"border-b-2 border-stone-400 text-stone-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-1 px-2",children:i?"दशा राशि":a.mahaDasha}),e.jsx("th",{className:"py-1 px-2",children:a.startsOn}),e.jsx("th",{className:"py-1 px-2",children:a.endsOn})]})}),e.jsx("tbody",{children:t.slice(0,12).map(n=>e.jsxs("tr",{className:"border-b border-stone-200",children:[e.jsx("td",{className:"py-1 px-2 font-medium text-stone-800",children:i?n.planet:_[n.planet]}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:ee(n.start)}),e.jsx("td",{className:"py-1 px-2 text-stone-700",children:ee(n.end)})]},`print-${n.planet}-${n.start}`))})]}),e.jsx("p",{className:"text-xs text-stone-600 px-2 italic",children:a.subDashaPrintNote})]})]})},Je=({isOpen:t,onClose:l,onPrint:d})=>{const[o,i]=x.useState("confirm"),[c,n]=x.useState(5),r=typeof window<"u"&&!!window.Android;x.useEffect(()=>{t&&(i("confirm"),n(5))},[t]),x.useEffect(()=>{let g;return o==="countdown"&&c>0?g=setTimeout(()=>n(b=>b-1),1e3):o==="countdown"&&c===0&&i("ready"),()=>clearTimeout(g)},[o,c]);const f=()=>{r&&window.Android?.triggerFullScreenAd?(window.Android.triggerFullScreenAd(),i("countdown")):(d(),l())},u=()=>{r&&window.Android?.printPage?window.Android.printPage():d(),l()};return!t||!r?null:e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-sm w-full p-6 relative animate-in fade-in zoom-in duration-200",children:[e.jsx("button",{onClick:l,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx(Nt,{size:20})}),o==="confirm"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-blue-100 dark:bg-blue-900/30 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(kt,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Support ",a.project]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6",children:"Please watch a short ad to print this document. Your support helps us keep the app free."}),e.jsx("button",{onClick:f,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:"Watch Ad & Print"})]}),o==="countdown"&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 dark:text-blue-400 mb-2 animate-pulse",children:c}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Preparing print..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Please wait for the ad to finish"})]}),o==="ready"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-green-100 dark:bg-green-900/30 w-12 h-12 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ke,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Ready to Print"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-6",children:"Thank you for your support!"}),e.jsxs("button",{onClick:u,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium shadow-md transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(Ke,{size:18})," Print Now"]})]})]})})},Se=({chart:t,layout:l})=>{if(!t.chartData)return null;const d="planets"in t.chartData?t.chartData.planets:[],o="ascendant"in t.chartData?t.chartData.ascendant.sign:1,i="ascendant"in t.chartData?t.chartData.ascendant.degreesInSign:void 0,c="ascendant"in t.chartData?t.chartData.ascendant.nakshatra:void 0,n="ascendant"in t.chartData?t.chartData.ascendant.nakshatraPada:void 0;return e.jsxs("div",{className:"chart-instance dark:bg-gray-800 break-inside-avoid-page page-break-inside-avoid print:mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1 text-center dark:text-orange-400",children:t.title}),e.jsx("div",{className:"chart-card dark:bg-gray-800 rounded-lg p-2 transition-colors duration-300",children:e.jsx(Gt,{planets:d.map(r=>({planet:r.planet,rashi:"rashi"in r?r.rashi:r.sign,degreesInSign:"degreesInSign"in r?r.degreesInSign:void 0,retrograde:r.retrograde,nakshatra:r.nakshatra,nakshatraPada:r.nakshatraPada})),ascendantSign:o,ascendantDegrees:i,ascendantNakshatra:c,ascendantNakshatraPada:n,chartType:t.type,layout:l})})]},t.title)},aa=({data:t,onReturnToForm:l,onNavigate:d})=>{const[o,i]=x.useState(!1),[c,n]=x.useState(!1),[r,f]=x.useState(()=>localStorage.getItem("kundaliChartLayout")||"square"),u=h=>{f(h),localStorage.setItem("kundaliChartLayout",h)},g=t.divisionalCharts.find(h=>h.name.includes("D9")),b=t.divisionalCharts.find(h=>h.name.includes("D10")),m=t.divisionalCharts.find(h=>h.name.includes("D3")),j=t.divisionalCharts.find(h=>h.name.includes("D12")),v=t.divisionalCharts.find(h=>h.name.includes("D4")),w=t.divisionalCharts.find(h=>h.name.includes("D60")),k=[{type:"lagna",title:a.rashiChart,chartData:t},{type:"chandra",title:a.chandraChart,chartData:t},{type:"navamsha",title:a.navamsaChart,chartData:g},{type:"dashamsa",title:a.dashamsaChart,chartData:b}],C=[{type:"drekkana",title:a.drekkanaChart,chartData:m},{type:"dwadamsha",title:a.dwadamshaChart,chartData:j},{type:"chaturthamsha",title:a.chaturthamshaChart,chartData:v},{type:"shashtiamsha",title:a.shashtiamshaChart,chartData:w}].filter(h=>h.chartData),I=new Date,E=B(I),N=`${p(E.year)} ${le[E.monthIndex]} ${p(E.day)}`,S=I.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 print:bg-white rounded-xl shadow-lg print:shadow-none w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-2 print:space-y-2",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center dark:bg-gray-800 dark:text-orange-400 transition-colors duration-300 print:bg-white print:shadow-none",children:[e.jsx("h2",{className:"text-3xl self-center font-bold text-orange-600 dark:text-orange-400",children:a.kundaliOf(t.birthDetails.name)}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-700 dark:text-gray-400",children:[a.printedDate,": ",N," ",S]}),e.jsx("div",{className:"mt-2 text-xs text-orange-600 dark:text-orange-400 text-center px-2",children:a.kundaliDisclaimer})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 print:gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 print:gap-2",children:[e.jsx(De,{data:t}),e.jsx(Ut,{planets:t.planets})]})}),e.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2 print:hidden",children:[e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a.chartStyle}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-gray-700 p-1 rounded-xl shadow-inner border border-slate-200 dark:border-gray-600",children:[e.jsx("button",{onClick:()=>u("lotus"),className:`px-4 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 ${r==="lotus"?"bg-orange-500 text-white shadow-md transform scale-105":"text-gray-500 dark:text-gray-400 hover:text-orange-500"}`,children:a.lotusStyle}),e.jsx("button",{onClick:()=>u("square"),className:`px-4 py-1.5 rounded-lg text-sm font-semibold transition-all duration-300 ${r==="square"?"bg-orange-500 text-white shadow-md transform scale-105":"text-gray-500 dark:text-gray-400 hover:text-orange-500"}`,children:a.squareStyle})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:k.map(h=>e.jsx(Se,{chart:h,layout:r},h.type))}),C.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 transition-all duration-500 overflow-hidden ${o?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:o&&C.map(h=>e.jsx(Se,{chart:h,layout:r},h.type))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("button",{onClick:()=>i(!o),className:"flex items-center justify-center gap-2 mx-auto px-4 py-2 text-sm font-medium text-orange-600 dark:text-orange-400 bg-orange-100/50 dark:bg-orange-900/20 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/40 transition",children:[e.jsx("span",{children:o?a.showLessCharts:a.showMoreCharts}),e.jsx(ue,{className:`w-4 h-4 transition-transform duration-300 ${o?"rotate-180":""}`})]})})]})]}),e.jsx("div",{className:"hidden print:block",children:e.jsx("div",{className:"flex flex-wrap -mx-2 mt-2 pt-4 border-t border-gray-300 dark:border-gray-700",children:[...k,...C].map(h=>e.jsx("div",{className:"w-1/2 px-2 mb-4 break-inside-avoid-page ",children:e.jsx(Se,{chart:h,layout:r})},`print-${h.type}`))})})]}),e.jsxs("div",{className:"space-y-4 print:space-y-2 print:pt-2",children:[e.jsx(ne,{dashaSequence:t.dashaSequence,title:a.dashaPeriods}),t.tribhagiDasha?.length>0&&e.jsx(ne,{dashaSequence:t.tribhagiDasha,title:a.tribhagiDasha}),t.yoginiDasha?.length>0&&e.jsx(ne,{dashaSequence:t.yoginiDasha,title:a.yoginiDasha}),t.ashtottariDasha?.length>0&&e.jsx(ne,{dashaSequence:t.ashtottariDasha,title:a.ashtottariDasha}),t.jaiminiDasha?.length>0&&e.jsx(ne,{dashaSequence:t.jaiminiDasha,title:a.jaiminiDasha})]}),e.jsxs("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-4 mt-8 border-t border-gray-300",children:[e.jsx("p",{children:"Printed from nepdate web/android application."}),e.jsx("p",{className:"mt-1",children:e.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate",className:"text-orange-600 underline",children:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate"})}),e.jsxs("p",{children:["© ",new Date().getFullYear()," ",a.project]})]}),e.jsx("div",{className:"mt-8 mb-8 w-full px-4 text-center print:hidden",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-orange-600 dark:bg-orange-600 text-white px-6 py-2 rounded shadow-md hover:bg-orange-700 transition flex items-center gap-2",onClick:l,children:["← ",a.returnToForm]}),e.jsx("button",{className:"bg-amber-600 dark:bg-amber-500 text-white px-6 py-2 rounded shadow-md hover:bg-amber-700 transition flex items-center gap-2",onClick:()=>{d&&d("paramarsha",{source:"kundali",data:t})},children:"🧑‍🏫 परामर्श (Consult)"}),e.jsxs("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 transition flex items-center gap-2",onClick:()=>{window.Android?n(!0):he()},children:[e.jsx(Xe,{className:"w-4 h-4"})," ",a.print]})]})}),e.jsx(Je,{isOpen:c,onClose:()=>n(!1),onPrint:he})]})},Wt={name:"सुरज",dateSystem:"BS",bsYear:2050,bsMonth:2,bsDay:2,hour:10,minute:15,second:0,period:"AM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},Xt={name:"अम्रिता",dateSystem:"BS",bsYear:2053,bsMonth:8,bsDay:9,hour:2,minute:30,second:0,period:"PM",location:{name:"काठमाडौं",romanization:"kathmandu",latitude:27.7172,longitude:85.324,offset:5.75,zoneId:"Asia/Kathmandu"}},sa=({onCalculate:t,isLoading:l,defaultValues:d})=>{const o=x.useRef(null),i=x.useRef(null),c=async()=>{const n=o.current?.validateAndGetData(),r=i.current?.validateAndGetData();if(n&&r){const[f,u]=await Promise.all([n,r]);f&&u&&t(f,u)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-700 dark:text-blue-300 mb-4 text-center",children:a.groomDetails}),e.jsx(He,{ref:o,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:d?.groom||Wt})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl shadow-lg p-4 dark:bg-gray-800/50",children:[e.jsx("h2",{className:"text-xl font-bold text-pink-700 dark:text-pink-400 mb-4 text-center",children:a.brideDetails}),e.jsx(He,{ref:i,onCalculate:()=>{},isLoading:!1,hideSubmitButton:!0,defaultValues:d?.bride||Xt})]})]}),e.jsx("div",{className:"pt-4 pb-16",children:e.jsx("button",{type:"button",onClick:c,disabled:l,className:"w-full flex justify-center items-center py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:bg-gray-400 disabled:cursor-not-allowed dark:bg-orange-600 dark:hover:bg-orange-700 dark:disabled:bg-gray-500",children:l?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-5 h-5 mr-3 animate-spin"}),a.calculating]}):a.calculateComparison})})]})},R=({label:t,groomValue:l,brideValue:d,typeLabel:o,maxPoints:i,obtainedPoints:c})=>e.jsxs("tr",{className:"border-b border-amber-100 dark:border-stone-700 last:border-b-0",children:[e.jsx("td",{className:"py-2 font-medium text-stone-800 dark:text-stone-100",children:t}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:l}),e.jsx("td",{className:"py-2 text-stone-700 dark:text-stone-200",children:d}),e.jsx("td",{className:"py-2 text-center text-blue-600 dark:text-blue-400 font-medium",children:o??""}),e.jsx("td",{className:"py-2 text-center text-stone-700 dark:text-stone-200",children:p(i)}),e.jsx("td",{className:"py-2 text-center font-semibold text-stone-800 dark:text-stone-100",children:p(c)})]}),ra=({result:t,onReturnToForm:l,onNavigate:d})=>{const[o,i]=x.useState(!1),{groom:c,bride:n,score:r,conclusion:f,labels:u}=t,g=new Date,b=B(g),m=`${p(b.year)} ${le[b.monthIndex]} ${p(b.day)}`,j=g.toLocaleTimeString("ne-NP",{hour:"numeric",minute:"2-digit",hour12:!0});return e.jsxs("div",{className:"kundali-display-container flex flex-col bg-slate-200 print:bg-white rounded-xl shadow-lg w-full lg:max-w-4xl xl:max-w-6xl lg:p-4 md:p-1 space-y-4 text-sm md:text-base dark:bg-gray-800 dark:text-gray-200 dark:border dark:border-gray-700 pb-32 print:pb-0 print:m-0 print:rounded-none print:shadow-none",children:[e.jsxs("header",{className:"kundali-card rounded-lg text-center p-4 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsxs("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[c.birthDetails.name," र ",n.birthDetails.name," को गुण मिलान"]}),e.jsxs("div",{className:"hidden text-xs self-center print:block font-bold text-gray-700 dark:text-gray-400",children:[a.printedDate,": ",m," ",j]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(De,{data:c,title:a.groomDetails,titleClassName:"text-blue-700 dark:text-blue-300"}),e.jsx(De,{data:n,title:a.brideDetails,titleClassName:"text-pink-700 dark:text-pink-400"})]}),e.jsxs("div",{className:"kundali-card p-3 sm:p-5 rounded-lg overflow-x-auto bg-slate-200 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsx("h3",{className:"text-xl font-bold text-orange-600 dark:text-orange-400 mb-4",children:a.gunaMilanTableTitle}),e.jsxs("table",{className:"w-full text-left text-sm sm:text-base",children:[e.jsx("thead",{className:"border-b-2 border-amber-200 dark:border-amber-700 text-stone-600 dark:text-stone-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2",children:a.koota}),e.jsx("th",{className:"py-2 px-2",children:a.groom}),e.jsx("th",{className:"py-2 px-2",children:a.bride}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.kootaType}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.maxPoints}),e.jsx("th",{className:"py-2 px-2 text-center",children:a.obtainedPoints})]})}),e.jsxs("tbody",{children:[e.jsx(R,{label:a.varna,groomValue:c.ashtaKoota.varna,brideValue:n.ashtaKoota.varna,typeLabel:u.varnaLabel,maxPoints:1,obtainedPoints:r.varna}),e.jsx(R,{label:a.vasya,groomValue:c.ashtaKoota.vasya,brideValue:n.ashtaKoota.vasya,typeLabel:u.vasyaLabel,maxPoints:2,obtainedPoints:r.vasya}),e.jsx(R,{label:a.tara,groomValue:c.nakshatra.nameNepali,brideValue:n.nakshatra.nameNepali,typeLabel:u.taraLabel,maxPoints:3,obtainedPoints:r.tara}),e.jsx(R,{label:a.yoni,groomValue:c.ashtaKoota.yoni,brideValue:n.ashtaKoota.yoni,typeLabel:u.yoniLabel,maxPoints:4,obtainedPoints:r.yoni}),e.jsx(R,{label:a.grahaMaitri,groomValue:c.ashtaKoota.rashiLord,brideValue:n.ashtaKoota.rashiLord,typeLabel:u.grahaMaitriLabel,maxPoints:5,obtainedPoints:r.grahaMaitri}),e.jsx(R,{label:a.gana,groomValue:c.ashtaKoota.gana,brideValue:n.ashtaKoota.gana,typeLabel:u.ganaLabel,maxPoints:6,obtainedPoints:r.gana}),e.jsx(R,{label:a.bhakoot,groomValue:A[c.planets.find(v=>v.planet==="MOON").rashi-1],brideValue:A[n.planets.find(v=>v.planet==="MOON").rashi-1],typeLabel:u.bhakootLabel,maxPoints:7,obtainedPoints:r.bhakoot}),e.jsx(R,{label:a.nadi,groomValue:c.ashtaKoota.nadi,brideValue:n.ashtaKoota.nadi,typeLabel:u.nadiLabel,maxPoints:8,obtainedPoints:r.nadi})]}),e.jsx("tfoot",{className:"border-t-2 border-amber-300 dark:border-amber-600 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"py-2 px-2 text-right text-stone-800 dark:text-stone-100",children:a.totalPoints}),e.jsx("td",{className:"px-2 text-center text-stone-800 dark:text-stone-100",children:p(36)}),e.jsx("td",{className:"px-2 text-center text-lg text-orange-600 dark:text-orange-400",children:p(r.total)})]})})]})]}),e.jsxs("div",{className:"kundali-card rounded-lg bg-slate-200 dark:bg-gray-800 print:bg-white print:shadow-none",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:a.conclusion}),e.jsx("p",{className:"text-stone-800 dark:text-stone-100",children:f})]}),e.jsxs("div",{className:"hidden print:block text-center text-xs text-gray-500 pt-4 mt-8 border-t border-gray-300",children:[e.jsx("p",{children:"Printed from nepdate web/android application."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate",className:"text-orange-600 underline",children:"https://play.google.com/store/apps/details?id=com.khumnath.nepdate"}),e.jsx("br",{}),"© ",new Date().getFullYear()," ",a.project]})]}),e.jsxs("div",{className:"mt-8 mb-8 w-full px-4 text-center screen-only-footer print:hidden",children:[e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs("button",{className:"bg-orange-600 dark:bg-orange-600 text-white px-6 py-2 rounded shadow-md hover:bg-orange-700 dark:hover:bg-orange-800 transition flex items-center gap-2",onClick:l,children:["← ",a.returnToForm]}),e.jsx("button",{className:"bg-amber-600 dark:bg-amber-500 text-white px-6 py-2 rounded shadow-md hover:bg-amber-700 transition flex items-center gap-2",onClick:()=>{d&&d("paramarsha",{source:"guna-milan",data:t})},children:"🧑‍🏫 परामर्श (Consult)"}),e.jsx("button",{className:"bg-gray-600 dark:bg-gray-500 text-white px-6 py-2 rounded shadow-md hover:bg-gray-700 dark:hover:bg-gray-600 transition flex items-center gap-2",onClick:()=>{window.Android?i(!0):he()},children:e.jsx(Xe,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 md:hidden",children:a.mobilePrintHint})]}),e.jsx(Je,{isOpen:o,onClose:()=>i(!1),onPrint:he})]})},na=({onClose:t,onEdit:l,onView:d})=>{const[o,i]=x.useState([]);x.useEffect(()=>{try{const r=localStorage.getItem("savedKundalis");r&&i(JSON.parse(r))}catch(r){console.error("Failed to load saved kundalis:",r)}},[]);const c=r=>{if(window.confirm(a.deleteConfirm)){const f=o.filter(u=>u.id!==r);i(f),localStorage.setItem("savedKundalis",JSON.stringify(f))}},n=r=>{const f=new Date(r);return new Intl.DateTimeFormat("ne-NP-u-nu-deva",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).format(f)};return e.jsx("div",{className:"fixed inset-0 flex flex-wrap items-center justify-center bg-black/60 z-50 p-4 transition-opacity",onClick:t,children:e.jsxs("div",{className:"bg-slate-200 dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full max-h-[80vh] flex flex-wrap flex-col p-6",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-blue-500 dark:text-blue-400",children:a.savedKundalis}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:e.jsx(Ce,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"overflow-y-auto flex-1",children:o.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:a.noSavedKundalis}):e.jsx("ul",{className:"space-y-3",children:o.map(r=>e.jsx("li",{className:"bg-slate-50 dark:bg-gray-700 p-3 rounded-md shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-blue-600 dark:text-blue-300",children:r.type==="individual"?r.name:`${r.groomName} र ${r.brideName}`}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${r.type==="individual"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:r.type==="individual"?a.individual:a.comparison}),e.jsxs("span",{className:"ml-2",children:[a.savedOn," ",n(r.timestamp)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>d(r),className:"px-3 py-1 text-sm text-white bg-blue-500 rounded hover:bg-blue-600",children:a.view}),e.jsx("button",{onClick:()=>l(r),className:"px-3 py-1 text-sm text-gray-700 bg-gray-300 rounded hover:bg-gray-400 dark:bg-gray-500 dark:text-gray-100 dark:hover:bg-gray-400",children:a.edit}),e.jsx("button",{onClick:()=>c(r.id),className:"px-3 py-1 text-sm text-white bg-red-500 rounded hover:bg-red-600",children:a.delete})]})]})},r.id))})})]})})};export{ra as C,aa as K,Je as P,na as S,sa as a,He as b};
